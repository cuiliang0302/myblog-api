import{r as L,a as u,o as ee,m as oe,s as le,n as re,q as te,v as ne,x as ae,b as ie,y as ce,z as de,A as se,B as pe,C as be,D as he,f as D,g as U,h as l,w as r,F as I,G as $,H as ue,I as xe,i as _,t as ve,u as N,J as O,j as g,l as a}from"./index.660fa367.js";/* empty css               */import{i as m,_ as _e}from"./plugin-vue_export-helper.430b94d4.js";import{e as ge,p as me,d as ke,b as fe}from"./index.b3b55e3a.js";function ye(){return m.get("/blog/note/")}function A(i){return m.get("/blog/catalogueList/"+i+"/")}function ze(i,s){const p="/blog/catalogue/"+i+"/";return m.put(p,s)}function we(i){return m.post("/blog/catalogue/",i)}function Ce(i){return m.delete("/blog/catalogue/"+i+"/")}function Ve(i,s){const p="/blog/catalogueList/"+i+"/";return m.put(p,s)}const Ee={class:"main"},De={class:"directory-label"},Ne={class:"directory-btn"},Le={class:"catalog-btn"},Ie=g("\u63D0\u4EA4"),Ye=g("\u91CD\u7F6E"),Be={class:"dialog-footer"},Fe=g("\u53D6\u6D88"),Se=g("\u63D0\u4EA4"),Ue={class:"dialog-footer"},$e=g("\u53D6\u6D88"),Oe=g("\u63D0\u4EA4"),Ae={__name:"Directory",setup(i){const s=L({note:""}),p=u();async function M(){p.value=await ye(),console.log(p.value)}const k=u(!1),x=u([]),f=()=>{k.value=!0,A(y.value).then(e=>{console.log(e),x.value=e.map((o,h)=>({id:o.id,label:"\u7B2C"+(h+1)+"\u7AE0\uFF1A"+o.name,name:o.name,children:o.child.map((n,d)=>({id:n.section_id,label:d+1+". "+n.name,name:n.name,children:NaN,section_id:n.section_id}))})),k.value=!1}).catch(e=>{console.log(e),a.error("\u83B7\u53D6\u7B14\u8BB0\u76EE\u5F55\u5931\u8D25\uFF01")})},R=e=>{console.log(e),y.value=e,f()},y=u(1),T=()=>{try{x.value.forEach((e,o)=>{let h=e.label.lastIndexOf("\u7AE0\uFF1A");e.label="\u7B2C"+(o+1)+"\u7AE0\uFF1A"+e.label.substring(h+2,e.label.length),e.children.forEach((n,d)=>{let V=n.label.lastIndexOf(". ");n.label=d+1+". "+n.label.substring(V+2,n.label.length)})})}catch(e){console.log(e),a.error("\u975E\u6CD5\u64CD\u4F5C\uFF0C\u8BF7\u91CD\u7F6E\u7ED3\u6784\u540E\u91CD\u65B0\u8C03\u6574\uFF01")}},z=u(0),q=e=>{z.value!==""?z.value=e.id:z.value=0},w=u(!1),b=L({name:"",edit_id:""}),G=e=>{console.log("\u7F16\u8F91\u8282\u70B9\u4E86"),console.log(e),w.value=!0,b.name=e.name,b.edit_id=e.id},H=()=>{console.log("\u63D0\u4EA4\u4E86\u7F16\u8F91\u54E6"),ze(b.edit_id,b).then(e=>{console.log(e),a({message:"\u4FEE\u6539\u7B14\u8BB0\u7AE0\u8282\u540D\u79F0\u6210\u529F\uFF01",type:"success"}),f(),w.value=!1}).catch(e=>{console.log(e),a.error("\u4FEE\u6539\u7B14\u8BB0\u7AE0\u8282\u540D\u79F0\u5931\u8D25\uFF01")})},C=u(!1),v=L({name:"",note:""}),J=()=>{console.log("\u63D0\u4EA4\u4E86\u65B0\u589E\u54E6"),v.note=y.value,console.log(v),we(v).then(e=>{console.log(e),a({message:"\u65B0\u589E\u7B14\u8BB0\u7AE0\u8282\u540D\u79F0\u6210\u529F\uFF01",type:"success"}),f(),C.value=!1}).catch(e=>{console.log(e),a.error("\u65B0\u589E\u7B14\u8BB0\u7AE0\u8282\u540D\u79F0\u5931\u8D25\uFF01")})},K=e=>{console.log("\u6267\u884C\u5220\u9664\u4E86"),console.log(e.children),e.children.length!==0?a.error("\u8BF7\u5148\u79FB\u9664\u8BE5\u7AE0\u8282\u4E0B\u7684\u7B14\u8BB0\u518D\u5220\u9664\uFF01"):Ce(e.id).then(o=>{console.log(o),a({message:"\u5220\u9664\u7B14\u8BB0\u7AE0\u8282\u540D\u79F0\u6210\u529F\uFF01",type:"success"}),f()}).catch(o=>{console.log(o),a.error("\u5220\u9664\u7B14\u8BB0\u7AE0\u8282\u540D\u79F0\u5931\u8D25\uFF01")})},P=()=>{console.log("\u6267\u884C\u53D6\u6D88\u4E86"),z.value=""},X=()=>{console.log("\u76EE\u5F55\u63D0\u4EA4\u4E86");const e={value:x.value};Ve(y.value,e).then(o=>{console.log(o),a({message:"\u7B14\u8BB0\u7F16\u6392\u6210\u529F\uFF01",type:"success"}),f()}).catch(o=>{console.log(o),a.error("\u7B14\u8BB0\u7F16\u6392\u5931\u8D25\uFF01")})},Q=()=>{console.log("\u91CD\u7F6E\u4E86"),k.value=!0,A(y.value).then(e=>{console.log(e),x.value=e.map((o,h)=>({id:o.id,label:"\u7B2C"+(h+1)+"\u7AE0\uFF1A"+o.name,children:o.child.map((n,d)=>({id:n.section_id,label:d+1+". "+n.name,children:NaN}))})),k.value=!1}).catch(e=>{console.log(e),a.error("\u83B7\u53D6\u7B14\u8BB0\u76EE\u5F55\u5931\u8D25\uFF01")})};return ee(()=>{M();const e=oe(()=>le.state.messageShow);console.log(e)}),(e,o)=>{const h=re,n=te,d=ne,V=ae,Y=ie,c=ce,W=de,Z=se,B=pe,F=be,j=he;return D(),U("div",Ee,[l(Y,{shadow:"hover"},{default:r(()=>[l(V,{ref:"formRef",model:s,"label-width":"120px"},{default:r(()=>[l(d,{label:"\u7B14\u8BB0\u540D\u79F0\uFF1A"},{default:r(()=>[l(n,{modelValue:s.note,"onUpdate:modelValue":o[0]||(o[0]=t=>s.note=t),onChange:R,placeholder:"\u8BF7\u9009\u62E9\u7F16\u6392\u7684\u7B14\u8BB0\u540D\u79F0",size:"large"},{default:r(()=>[(D(!0),U(ue,null,xe(p.value,t=>(D(),$(h,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1}),I((D(),$(Y,{shadow:"hover"},{default:r(()=>[l(Z,{data:x.value,onNodeDrop:T,onNodeClick:q,draggable:""},{default:r(({node:t,data:E})=>[_("span",De,[_("span",null,ve(t.label),1),I(_("span",Ne,[l(c,{size:"small",icon:N(ge),onClick:S=>G(E)},null,8,["icon","onClick"]),l(c,{size:"small",icon:N(me),onClick:o[1]||(o[1]=S=>C.value=!0)},null,8,["icon"]),l(W,{title:"\u786E\u5B9A\u8981\u5220\u9664\u6B64\u7AE0\u8282\u5417",onConfirm:S=>K(E)},{reference:r(()=>[l(c,{size:"small",icon:N(ke)},null,8,["icon"])]),_:2},1032,["onConfirm"]),l(c,{size:"small",icon:N(fe),onClick:P},null,8,["icon"])],512),[[O,E.id===z.value&&(E.children.length||E.children.length===0)]])])]),_:1},8,["data"]),I(_("div",Le,[l(c,{type:"primary",onClick:X},{default:r(()=>[Ie]),_:1}),l(c,{onClick:Q},{default:r(()=>[Ye]),_:1})],512),[[O,x.value.length!==0]])]),_:1})),[[j,k.value]]),l(F,{modelValue:w.value,"onUpdate:modelValue":o[4]||(o[4]=t=>w.value=t),title:"\u7F16\u8F91\u7AE0\u8282\u540D\u79F0",width:"30%"},{footer:r(()=>[_("span",Be,[l(c,{onClick:o[3]||(o[3]=t=>w.value=!1)},{default:r(()=>[Fe]),_:1}),l(c,{type:"primary",onClick:H},{default:r(()=>[Se]),_:1})])]),default:r(()=>[l(V,{model:b},{default:r(()=>[l(d,{label:"\u7AE0\u8282\u540D\u79F0:"},{default:r(()=>[l(B,{modelValue:b.name,"onUpdate:modelValue":o[2]||(o[2]=t=>b.name=t)},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"]),l(F,{modelValue:C.value,"onUpdate:modelValue":o[7]||(o[7]=t=>C.value=t),title:"\u65B0\u589E\u7AE0\u8282\u540D\u79F0",width:"30%"},{footer:r(()=>[_("span",Ue,[l(c,{onClick:o[6]||(o[6]=t=>C.value=!1)},{default:r(()=>[$e]),_:1}),l(c,{type:"primary",onClick:J},{default:r(()=>[Oe]),_:1})])]),default:r(()=>[l(V,{model:v},{default:r(()=>[l(d,{label:"\u7AE0\u8282\u540D\u79F0:"},{default:r(()=>[l(B,{modelValue:v.name,"onUpdate:modelValue":o[5]||(o[5]=t=>v.name=t),placeholder:"\u8BF7\u8F93\u5165\u65B0\u7AE0\u8282\u540D\u79F0"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])])}}};var Ge=_e(Ae,[["__scopeId","data-v-1a2e1ee4"]]);export{Ge as default};
