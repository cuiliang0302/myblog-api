import{W as ot,X as Qe,a as C,Y as Jt,Z as tr,_ as Q,j as er,B as Lt,C as Pt,o as N,k as D,R as tt,U as mt,l as E,$ as yt,a0 as Ft,a1 as rr,y as st,F as Zt,n as q,m as Yt,w as A,u as P,A as et,D as at,K as Rt,a2 as Kt,a3 as Qt,P as te,Q as ee,G as nr,H as ir,I as or,a4 as sr,J as ar,s as ur,S as hr,T as cr,c as re}from"./vendor.0cc00acd.js";import{i as lr,_ as zt}from"./plugin-vue_export-helper.20d5916d.js";/* empty css               *//* empty css                 */var ne={},ie={exports:{}};/*!
 * clipboard.js v2.0.10
 * https://clipboardjs.com/
 *
 * Licensed MIT Â© Zeno Rocha
 */(function(e,r){(function(n,o){e.exports=o()})(ot,function(){return function(){var t={686:function(i,a,u){u.d(a,{default:function(){return Ke}});var l=u(279),s=u.n(l),f=u(370),m=u.n(f),y=u(817),w=u.n(y);function x(O){try{return document.execCommand(O)}catch{return!1}}var _=function(k){var S=w()(k);return x("cut"),S},b=_;function v(O){var k=document.documentElement.getAttribute("dir")==="rtl",S=document.createElement("textarea");S.style.fontSize="12pt",S.style.border="0",S.style.padding="0",S.style.margin="0",S.style.position="absolute",S.style[k?"right":"left"]="-9999px";var M=window.pageYOffset||document.documentElement.scrollTop;return S.style.top="".concat(M,"px"),S.setAttribute("readonly",""),S.value=O,S}var g=function(k){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body},M="";if(typeof k=="string"){var T=v(k);S.container.appendChild(T),M=w()(T),x("copy"),T.remove()}else M=w()(k),x("copy");return M},c=g;function h(O){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?h=function(S){return typeof S}:h=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},h(O)}var p=function(){var k=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},S=k.action,M=S===void 0?"copy":S,T=k.container,I=k.target,X=k.text;if(M!=="copy"&&M!=="cut")throw new Error('Invalid "action" value, use either "copy" or "cut"');if(I!==void 0)if(I&&h(I)==="object"&&I.nodeType===1){if(M==="copy"&&I.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if(M==="cut"&&(I.hasAttribute("readonly")||I.hasAttribute("disabled")))throw new Error(`Invalid "target" attribute. You can't cut text from elements with "readonly" or "disabled" attributes`)}else throw new Error('Invalid "target" value, use a valid Element');if(X)return c(X,{container:T});if(I)return M==="cut"?b(I):c(I,{container:T})},d=p;function H(O){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?H=function(S){return typeof S}:H=function(S){return S&&typeof Symbol=="function"&&S.constructor===Symbol&&S!==Symbol.prototype?"symbol":typeof S},H(O)}function R(O,k){if(!(O instanceof k))throw new TypeError("Cannot call a class as a function")}function $(O,k){for(var S=0;S<k.length;S++){var M=k[S];M.enumerable=M.enumerable||!1,M.configurable=!0,"value"in M&&(M.writable=!0),Object.defineProperty(O,M.key,M)}}function L(O,k,S){return k&&$(O.prototype,k),S&&$(O,S),O}function it(O,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");O.prototype=Object.create(k&&k.prototype,{constructor:{value:O,writable:!0,configurable:!0}}),k&&Et(O,k)}function Et(O,k){return Et=Object.setPrototypeOf||function(M,T){return M.__proto__=T,M},Et(O,k)}function qe(O){var k=Je();return function(){var M=gt(O),T;if(k){var I=gt(this).constructor;T=Reflect.construct(M,arguments,I)}else T=M.apply(this,arguments);return Ve(this,T)}}function Ve(O,k){return k&&(H(k)==="object"||typeof k=="function")?k:Ge(O)}function Ge(O){if(O===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O}function Je(){if(typeof Reflect=="undefined"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function gt(O){return gt=Object.setPrototypeOf?Object.getPrototypeOf:function(S){return S.__proto__||Object.getPrototypeOf(S)},gt(O)}function Ht(O,k){var S="data-clipboard-".concat(O);if(!!k.hasAttribute(S))return k.getAttribute(S)}var Ze=function(O){it(S,O);var k=qe(S);function S(M,T){var I;return R(this,S),I=k.call(this),I.resolveOptions(T),I.listenClick(M),I}return L(S,[{key:"resolveOptions",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.action=typeof T.action=="function"?T.action:this.defaultAction,this.target=typeof T.target=="function"?T.target:this.defaultTarget,this.text=typeof T.text=="function"?T.text:this.defaultText,this.container=H(T.container)==="object"?T.container:document.body}},{key:"listenClick",value:function(T){var I=this;this.listener=m()(T,"click",function(X){return I.onClick(X)})}},{key:"onClick",value:function(T){var I=T.delegateTarget||T.currentTarget,X=this.action(I)||"copy",vt=d({action:X,container:this.container,target:this.target(I),text:this.text(I)});this.emit(vt?"success":"error",{action:X,text:vt,trigger:I,clearSelection:function(){I&&I.focus(),document.activeElement.blur(),window.getSelection().removeAllRanges()}})}},{key:"defaultAction",value:function(T){return Ht("action",T)}},{key:"defaultTarget",value:function(T){var I=Ht("target",T);if(I)return document.querySelector(I)}},{key:"defaultText",value:function(T){return Ht("text",T)}},{key:"destroy",value:function(){this.listener.destroy()}}],[{key:"copy",value:function(T){var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{container:document.body};return c(T,I)}},{key:"cut",value:function(T){return b(T)}},{key:"isSupported",value:function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:["copy","cut"],I=typeof T=="string"?[T]:T,X=!!document.queryCommandSupported;return I.forEach(function(vt){X=X&&!!document.queryCommandSupported(vt)}),X}}]),S}(s()),Ke=Ze},828:function(i){var a=9;if(typeof Element!="undefined"&&!Element.prototype.matches){var u=Element.prototype;u.matches=u.matchesSelector||u.mozMatchesSelector||u.msMatchesSelector||u.oMatchesSelector||u.webkitMatchesSelector}function l(s,f){for(;s&&s.nodeType!==a;){if(typeof s.matches=="function"&&s.matches(f))return s;s=s.parentNode}}i.exports=l},438:function(i,a,u){var l=u(828);function s(y,w,x,_,b){var v=m.apply(this,arguments);return y.addEventListener(x,v,b),{destroy:function(){y.removeEventListener(x,v,b)}}}function f(y,w,x,_,b){return typeof y.addEventListener=="function"?s.apply(null,arguments):typeof x=="function"?s.bind(null,document).apply(null,arguments):(typeof y=="string"&&(y=document.querySelectorAll(y)),Array.prototype.map.call(y,function(v){return s(v,w,x,_,b)}))}function m(y,w,x,_){return function(b){b.delegateTarget=l(b.target,w),b.delegateTarget&&_.call(y,b)}}i.exports=f},879:function(i,a){a.node=function(u){return u!==void 0&&u instanceof HTMLElement&&u.nodeType===1},a.nodeList=function(u){var l=Object.prototype.toString.call(u);return u!==void 0&&(l==="[object NodeList]"||l==="[object HTMLCollection]")&&"length"in u&&(u.length===0||a.node(u[0]))},a.string=function(u){return typeof u=="string"||u instanceof String},a.fn=function(u){var l=Object.prototype.toString.call(u);return l==="[object Function]"}},370:function(i,a,u){var l=u(879),s=u(438);function f(x,_,b){if(!x&&!_&&!b)throw new Error("Missing required arguments");if(!l.string(_))throw new TypeError("Second argument must be a String");if(!l.fn(b))throw new TypeError("Third argument must be a Function");if(l.node(x))return m(x,_,b);if(l.nodeList(x))return y(x,_,b);if(l.string(x))return w(x,_,b);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function m(x,_,b){return x.addEventListener(_,b),{destroy:function(){x.removeEventListener(_,b)}}}function y(x,_,b){return Array.prototype.forEach.call(x,function(v){v.addEventListener(_,b)}),{destroy:function(){Array.prototype.forEach.call(x,function(v){v.removeEventListener(_,b)})}}}function w(x,_,b){return s(document.body,x,_,b)}i.exports=f},817:function(i){function a(u){var l;if(u.nodeName==="SELECT")u.focus(),l=u.value;else if(u.nodeName==="INPUT"||u.nodeName==="TEXTAREA"){var s=u.hasAttribute("readonly");s||u.setAttribute("readonly",""),u.select(),u.setSelectionRange(0,u.value.length),s||u.removeAttribute("readonly"),l=u.value}else{u.hasAttribute("contenteditable")&&u.focus();var f=window.getSelection(),m=document.createRange();m.selectNodeContents(u),f.removeAllRanges(),f.addRange(m),l=f.toString()}return l}i.exports=a},279:function(i){function a(){}a.prototype={on:function(u,l,s){var f=this.e||(this.e={});return(f[u]||(f[u]=[])).push({fn:l,ctx:s}),this},once:function(u,l,s){var f=this;function m(){f.off(u,m),l.apply(s,arguments)}return m._=l,this.on(u,m,s)},emit:function(u){var l=[].slice.call(arguments,1),s=((this.e||(this.e={}))[u]||[]).slice(),f=0,m=s.length;for(f;f<m;f++)s[f].fn.apply(s[f].ctx,l);return this},off:function(u,l){var s=this.e||(this.e={}),f=s[u],m=[];if(f&&l)for(var y=0,w=f.length;y<w;y++)f[y].fn!==l&&f[y].fn._!==l&&m.push(f[y]);return m.length?s[u]=m:delete s[u],this}},i.exports=a,i.exports.TinyEmitter=a}},n={};function o(i){if(n[i])return n[i].exports;var a=n[i]={exports:{}};return t[i](a,a.exports,o),a.exports}return function(){o.n=function(i){var a=i&&i.__esModule?function(){return i.default}:function(){return i};return o.d(a,{a}),a}}(),function(){o.d=function(i,a){for(var u in a)o.o(a,u)&&!o.o(i,u)&&Object.defineProperty(i,u,{enumerable:!0,get:a[u]})}}(),function(){o.o=function(i,a){return Object.prototype.hasOwnProperty.call(i,a)}}(),o(686)}().default})})(ie);var fr=ot&&ot.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ne,"__esModule",{value:!0});var pr=fr(ie.exports),dr=ne.default=function(e){var r=(e==null?void 0:e.appendToBody)===void 0?!0:e.appendToBody;return{toClipboard:function(t,n){return new Promise(function(o,i){var a=document.createElement("button"),u=new pr.default(a,{text:function(){return t},action:function(){return"copy"},container:n!==void 0?n:document.body});u.on("success",function(l){u.destroy(),o(l)}),u.on("error",function(l){u.destroy(),i(l)}),r&&document.body.appendChild(a),a.click(),r&&document.body.removeChild(a)})}}};function z(e,r){gr(e)&&(e="100%");var t=vr(e);return e=r===360?e:Math.min(r,Math.max(0,parseFloat(e))),t&&(e=parseInt(String(e*r),10)/100),Math.abs(e-r)<1e-6?1:(r===360?e=(e<0?e%r+r:e%r)/parseFloat(String(r)):e=e%r/parseFloat(String(r)),e)}function bt(e){return Math.min(1,Math.max(0,e))}function gr(e){return typeof e=="string"&&e.indexOf(".")!==-1&&parseFloat(e)===1}function vr(e){return typeof e=="string"&&e.indexOf("%")!==-1}function oe(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function wt(e){return e<=1?Number(e)*100+"%":e}function J(e){return e.length===1?"0"+e:String(e)}function mr(e,r,t){return{r:z(e,255)*255,g:z(r,255)*255,b:z(t,255)*255}}function se(e,r,t){e=z(e,255),r=z(r,255),t=z(t,255);var n=Math.max(e,r,t),o=Math.min(e,r,t),i=0,a=0,u=(n+o)/2;if(n===o)a=0,i=0;else{var l=n-o;switch(a=u>.5?l/(2-n-o):l/(n+o),n){case e:i=(r-t)/l+(r<t?6:0);break;case r:i=(t-e)/l+2;break;case t:i=(e-r)/l+4;break}i/=6}return{h:i,s:a,l:u}}function Ut(e,r,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?e+(r-e)*(6*t):t<1/2?r:t<2/3?e+(r-e)*(2/3-t)*6:e}function yr(e,r,t){var n,o,i;if(e=z(e,360),r=z(r,100),t=z(t,100),r===0)o=t,i=t,n=t;else{var a=t<.5?t*(1+r):t+r-t*r,u=2*t-a;n=Ut(u,a,e+1/3),o=Ut(u,a,e),i=Ut(u,a,e-1/3)}return{r:n*255,g:o*255,b:i*255}}function ae(e,r,t){e=z(e,255),r=z(r,255),t=z(t,255);var n=Math.max(e,r,t),o=Math.min(e,r,t),i=0,a=n,u=n-o,l=n===0?0:u/n;if(n===o)i=0;else{switch(n){case e:i=(r-t)/u+(r<t?6:0);break;case r:i=(t-e)/u+2;break;case t:i=(e-r)/u+4;break}i/=6}return{h:i,s:l,v:a}}function br(e,r,t){e=z(e,360)*6,r=z(r,100),t=z(t,100);var n=Math.floor(e),o=e-n,i=t*(1-r),a=t*(1-o*r),u=t*(1-(1-o)*r),l=n%6,s=[t,a,i,i,u,t][l],f=[u,t,t,a,i,i][l],m=[i,i,u,t,t,a][l];return{r:s*255,g:f*255,b:m*255}}function ue(e,r,t,n){var o=[J(Math.round(e).toString(16)),J(Math.round(r).toString(16)),J(Math.round(t).toString(16))];return n&&o[0].startsWith(o[0].charAt(1))&&o[1].startsWith(o[1].charAt(1))&&o[2].startsWith(o[2].charAt(1))?o[0].charAt(0)+o[1].charAt(0)+o[2].charAt(0):o.join("")}function wr(e,r,t,n,o){var i=[J(Math.round(e).toString(16)),J(Math.round(r).toString(16)),J(Math.round(t).toString(16)),J(xr(n))];return o&&i[0].startsWith(i[0].charAt(1))&&i[1].startsWith(i[1].charAt(1))&&i[2].startsWith(i[2].charAt(1))&&i[3].startsWith(i[3].charAt(1))?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function xr(e){return Math.round(parseFloat(e)*255).toString(16)}function he(e){return B(e)/255}function B(e){return parseInt(e,16)}function _r(e){return{r:e>>16,g:(e&65280)>>8,b:e&255}}var $t={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function Cr(e){var r={r:0,g:0,b:0},t=1,n=null,o=null,i=null,a=!1,u=!1;return typeof e=="string"&&(e=Tr(e)),typeof e=="object"&&(W(e.r)&&W(e.g)&&W(e.b)?(r=mr(e.r,e.g,e.b),a=!0,u=String(e.r).substr(-1)==="%"?"prgb":"rgb"):W(e.h)&&W(e.s)&&W(e.v)?(n=wt(e.s),o=wt(e.v),r=br(e.h,n,o),a=!0,u="hsv"):W(e.h)&&W(e.s)&&W(e.l)&&(n=wt(e.s),i=wt(e.l),r=yr(e.h,n,i),a=!0,u="hsl"),Object.prototype.hasOwnProperty.call(e,"a")&&(t=e.a)),t=oe(t),{ok:a,format:e.format||u,r:Math.min(255,Math.max(r.r,0)),g:Math.min(255,Math.max(r.g,0)),b:Math.min(255,Math.max(r.b,0)),a:t}}var Sr="[-\\+]?\\d+%?",kr="[-\\+]?\\d*\\.\\d+%?",V="(?:"+kr+")|(?:"+Sr+")",Bt="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",Xt="[\\s|\\(]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")[,|\\s]+("+V+")\\s*\\)?",j={CSS_UNIT:new RegExp(V),rgb:new RegExp("rgb"+Bt),rgba:new RegExp("rgba"+Xt),hsl:new RegExp("hsl"+Bt),hsla:new RegExp("hsla"+Xt),hsv:new RegExp("hsv"+Bt),hsva:new RegExp("hsva"+Xt),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Tr(e){if(e=e.trim().toLowerCase(),e.length===0)return!1;var r=!1;if($t[e])e=$t[e],r=!0;else if(e==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=j.rgb.exec(e);return t?{r:t[1],g:t[2],b:t[3]}:(t=j.rgba.exec(e),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=j.hsl.exec(e),t?{h:t[1],s:t[2],l:t[3]}:(t=j.hsla.exec(e),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=j.hsv.exec(e),t?{h:t[1],s:t[2],v:t[3]}:(t=j.hsva.exec(e),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=j.hex8.exec(e),t?{r:B(t[1]),g:B(t[2]),b:B(t[3]),a:he(t[4]),format:r?"name":"hex8"}:(t=j.hex6.exec(e),t?{r:B(t[1]),g:B(t[2]),b:B(t[3]),format:r?"name":"hex"}:(t=j.hex4.exec(e),t?{r:B(t[1]+t[1]),g:B(t[2]+t[2]),b:B(t[3]+t[3]),a:he(t[4]+t[4]),format:r?"name":"hex8"}:(t=j.hex3.exec(e),t?{r:B(t[1]+t[1]),g:B(t[2]+t[2]),b:B(t[3]+t[3]),format:r?"name":"hex"}:!1)))))))))}function W(e){return Boolean(j.CSS_UNIT.exec(String(e)))}var xt=function(){function e(r,t){r===void 0&&(r=""),t===void 0&&(t={});var n;if(r instanceof e)return r;typeof r=="number"&&(r=_r(r)),this.originalInput=r;var o=Cr(r);this.originalInput=r,this.r=o.r,this.g=o.g,this.b=o.b,this.a=o.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=t.format)!==null&&n!==void 0?n:o.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=o.ok}return e.prototype.isDark=function(){return this.getBrightness()<128},e.prototype.isLight=function(){return!this.isDark()},e.prototype.getBrightness=function(){var r=this.toRgb();return(r.r*299+r.g*587+r.b*114)/1e3},e.prototype.getLuminance=function(){var r=this.toRgb(),t,n,o,i=r.r/255,a=r.g/255,u=r.b/255;return i<=.03928?t=i/12.92:t=Math.pow((i+.055)/1.055,2.4),a<=.03928?n=a/12.92:n=Math.pow((a+.055)/1.055,2.4),u<=.03928?o=u/12.92:o=Math.pow((u+.055)/1.055,2.4),.2126*t+.7152*n+.0722*o},e.prototype.getAlpha=function(){return this.a},e.prototype.setAlpha=function(r){return this.a=oe(r),this.roundA=Math.round(100*this.a)/100,this},e.prototype.toHsv=function(){var r=ae(this.r,this.g,this.b);return{h:r.h*360,s:r.s,v:r.v,a:this.a}},e.prototype.toHsvString=function(){var r=ae(this.r,this.g,this.b),t=Math.round(r.h*360),n=Math.round(r.s*100),o=Math.round(r.v*100);return this.a===1?"hsv("+t+", "+n+"%, "+o+"%)":"hsva("+t+", "+n+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHsl=function(){var r=se(this.r,this.g,this.b);return{h:r.h*360,s:r.s,l:r.l,a:this.a}},e.prototype.toHslString=function(){var r=se(this.r,this.g,this.b),t=Math.round(r.h*360),n=Math.round(r.s*100),o=Math.round(r.l*100);return this.a===1?"hsl("+t+", "+n+"%, "+o+"%)":"hsla("+t+", "+n+"%, "+o+"%, "+this.roundA+")"},e.prototype.toHex=function(r){return r===void 0&&(r=!1),ue(this.r,this.g,this.b,r)},e.prototype.toHexString=function(r){return r===void 0&&(r=!1),"#"+this.toHex(r)},e.prototype.toHex8=function(r){return r===void 0&&(r=!1),wr(this.r,this.g,this.b,this.a,r)},e.prototype.toHex8String=function(r){return r===void 0&&(r=!1),"#"+this.toHex8(r)},e.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},e.prototype.toRgbString=function(){var r=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb("+r+", "+t+", "+n+")":"rgba("+r+", "+t+", "+n+", "+this.roundA+")"},e.prototype.toPercentageRgb=function(){var r=function(t){return Math.round(z(t,255)*100)+"%"};return{r:r(this.r),g:r(this.g),b:r(this.b),a:this.a}},e.prototype.toPercentageRgbString=function(){var r=function(t){return Math.round(z(t,255)*100)};return this.a===1?"rgb("+r(this.r)+"%, "+r(this.g)+"%, "+r(this.b)+"%)":"rgba("+r(this.r)+"%, "+r(this.g)+"%, "+r(this.b)+"%, "+this.roundA+")"},e.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var r="#"+ue(this.r,this.g,this.b,!1),t=0,n=Object.entries($t);t<n.length;t++){var o=n[t],i=o[0],a=o[1];if(r===a)return i}return!1},e.prototype.toString=function(r){var t=Boolean(r);r=r!=null?r:this.format;var n=!1,o=this.a<1&&this.a>=0,i=!t&&o&&(r.startsWith("hex")||r==="name");return i?r==="name"&&this.a===0?this.toName():this.toRgbString():(r==="rgb"&&(n=this.toRgbString()),r==="prgb"&&(n=this.toPercentageRgbString()),(r==="hex"||r==="hex6")&&(n=this.toHexString()),r==="hex3"&&(n=this.toHexString(!0)),r==="hex4"&&(n=this.toHex8String(!0)),r==="hex8"&&(n=this.toHex8String()),r==="name"&&(n=this.toName()),r==="hsl"&&(n=this.toHslString()),r==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},e.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},e.prototype.clone=function(){return new e(this.toString())},e.prototype.lighten=function(r){r===void 0&&(r=10);var t=this.toHsl();return t.l+=r/100,t.l=bt(t.l),new e(t)},e.prototype.brighten=function(r){r===void 0&&(r=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(r/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(r/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(r/100)))),new e(t)},e.prototype.darken=function(r){r===void 0&&(r=10);var t=this.toHsl();return t.l-=r/100,t.l=bt(t.l),new e(t)},e.prototype.tint=function(r){return r===void 0&&(r=10),this.mix("white",r)},e.prototype.shade=function(r){return r===void 0&&(r=10),this.mix("black",r)},e.prototype.desaturate=function(r){r===void 0&&(r=10);var t=this.toHsl();return t.s-=r/100,t.s=bt(t.s),new e(t)},e.prototype.saturate=function(r){r===void 0&&(r=10);var t=this.toHsl();return t.s+=r/100,t.s=bt(t.s),new e(t)},e.prototype.greyscale=function(){return this.desaturate(100)},e.prototype.spin=function(r){var t=this.toHsl(),n=(t.h+r)%360;return t.h=n<0?360+n:n,new e(t)},e.prototype.mix=function(r,t){t===void 0&&(t=50);var n=this.toRgb(),o=new e(r).toRgb(),i=t/100,a={r:(o.r-n.r)*i+n.r,g:(o.g-n.g)*i+n.g,b:(o.b-n.b)*i+n.b,a:(o.a-n.a)*i+n.a};return new e(a)},e.prototype.analogous=function(r,t){r===void 0&&(r=6),t===void 0&&(t=30);var n=this.toHsl(),o=360/t,i=[this];for(n.h=(n.h-(o*r>>1)+720)%360;--r;)n.h=(n.h+o)%360,i.push(new e(n));return i},e.prototype.complement=function(){var r=this.toHsl();return r.h=(r.h+180)%360,new e(r)},e.prototype.monochromatic=function(r){r===void 0&&(r=6);for(var t=this.toHsv(),n=t.h,o=t.s,i=t.v,a=[],u=1/r;r--;)a.push(new e({h:n,s:o,v:i})),i=(i+u)%1;return a},e.prototype.splitcomplement=function(){var r=this.toHsl(),t=r.h;return[this,new e({h:(t+72)%360,s:r.s,l:r.l}),new e({h:(t+216)%360,s:r.s,l:r.l})]},e.prototype.onBackground=function(r){var t=this.toRgb(),n=new e(r).toRgb();return new e({r:n.r+(t.r-n.r)*t.a,g:n.g+(t.g-n.g)*t.a,b:n.b+(t.b-n.b)*t.a})},e.prototype.triad=function(){return this.polyad(3)},e.prototype.tetrad=function(){return this.polyad(4)},e.prototype.polyad=function(r){for(var t=this.toHsl(),n=t.h,o=[this],i=360/r,a=1;a<r;a++)o.push(new e({h:(n+a*i)%360,s:t.s,l:t.l}));return o},e.prototype.equals=function(r){return this.toRgbString()===new e(r).toRgbString()},e}(),_t=2,ce=.16,Or=.05,Mr=.05,Ar=.15,le=5,fe=4,Ir=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function pe(e,r,t){var n;return Math.round(e.h)>=60&&Math.round(e.h)<=240?n=t?Math.round(e.h)-_t*r:Math.round(e.h)+_t*r:n=t?Math.round(e.h)+_t*r:Math.round(e.h)-_t*r,n<0?n+=360:n>=360&&(n-=360),n}function de(e,r,t){if(e.h===0&&e.s===0)return e.s;var n;return t?n=e.s-ce*r:r===fe?n=e.s+ce:n=e.s+Or*r,n>1&&(n=1),t&&r===le&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function ge(e,r,t){var n;return t?n=e.v+Mr*r:n=e.v-Ar*r,n>1&&(n=1),Number(n.toFixed(2))}function ve(e){for(var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],n=new xt(e),o=le;o>0;o-=1){var i=n.toHsv(),a=new xt({h:pe(i,o,!0),s:de(i,o,!0),v:ge(i,o,!0)}).toHexString();t.push(a)}t.push(n.toHexString());for(var u=1;u<=fe;u+=1){var l=n.toHsv(),s=new xt({h:pe(l,u),s:de(l,u),v:ge(l,u)}).toHexString();t.push(s)}return r.theme==="dark"?Ir.map(function(f){var m=f.index,y=f.opacity,w=new xt(r.backgroundColor||"#141414").mix(t[m],y*100).toHexString();return w}):t}var jt={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},U={},Nt={};Object.keys(jt).forEach(function(e){U[e]=ve(jt[e]),U[e].primary=U[e][5],Nt[e]=ve(jt[e],{theme:"dark",backgroundColor:"#141414"}),Nt[e].primary=Nt[e][5]});U.red;U.volcano;U.gold;U.orange;U.yellow;U.lime;U.green;U.cyan;U.blue;U.geekblue;U.purple;U.magenta;U.grey;var me=[],ut=[],Er="insert-css: You need to provide a CSS string. Usage: insertCss(cssString[, options]).";function Hr(){var e=document.createElement("style");return e.setAttribute("type","text/css"),e}function Lr(e,r){if(r=r||{},e===void 0)throw new Error(Er);var t=r.prepend===!0?"prepend":"append",n=r.container!==void 0?r.container:document.querySelector("head"),o=me.indexOf(n);o===-1&&(o=me.push(n)-1,ut[o]={});var i;return ut[o]!==void 0&&ut[o][t]!==void 0?i=ut[o][t]:(i=ut[o][t]=Hr(),t==="prepend"?n.insertBefore(i,n.childNodes[0]):n.appendChild(i)),e.charCodeAt(0)===65279&&(e=e.substr(1,e.length)),i.styleSheet?i.styleSheet.cssText+=e:i.textContent+=e,i}function Pr(e,r){}var Fr={width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true",focusable:"false"},Yr=`
.anticon {
  display: inline-block;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,ye=!1,Rr=function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Yr;Qe(function(){ye||(typeof window!="undefined"&&window.document&&window.document.documentElement&&Lr(r,{prepend:!0}),ye=!0)})};function be(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?Object(arguments[r]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){we(e,o,t[o])})}return e}function we(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function zr(e,r){if(e==null)return{};var t=Ur(e,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}function Ur(e,r){if(e==null)return{};var t={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}var Ct=function(r,t){var n=t.attrs,o=t.slots,i=be({},r,n),a=i.class,u=i.component,l=i.viewBox,s=i.spin,f=i.rotate,m=i.tabindex,y=i.onClick,w=zr(i,["class","component","viewBox","spin","rotate","tabindex","onClick"]),x=o.default&&o.default(),_=x&&x.length,b=o.component;Rr();var v=we({anticon:!0},a,a),g={"anticon-spin":s===""||!!s},c=f?{msTransform:"rotate(".concat(f,"deg)"),transform:"rotate(".concat(f,"deg)")}:void 0,h=be({},Fr,{viewBox:l,class:g,style:c});l||delete h.viewBox;var p=function(){return u?C(u,h,{default:function(){return[x]}}):b?b(h):_?(Pr(Boolean(l)||x.length===1&&x[0]&&x[0].type==="use"),C("svg",Jt(h,{viewBox:l}),[x])):null},d=m;return d===void 0&&y&&(d=-1,w.tabindex=d),C("span",Jt(w,{role:"img",onClick:y,class:v}),[p()])};Ct.props={spin:Boolean,rotate:Number,viewBox:String,ariaLabel:String};Ct.inheritAttrs=!1;Ct.displayName="Icon";var $r=Ct;function xe(e){for(var r=1;r<arguments.length;r++){var t=arguments[r]!=null?Object(arguments[r]):{},n=Object.keys(t);typeof Object.getOwnPropertySymbols=="function"&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(o){return Object.getOwnPropertyDescriptor(t,o).enumerable}))),n.forEach(function(o){Br(e,o,t[o])})}return e}function Br(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}function Xr(e,r){if(e==null)return{};var t=jr(e,r),n,o;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],!(r.indexOf(n)>=0)&&(!Object.prototype.propertyIsEnumerable.call(e,n)||(t[n]=e[n]))}return t}function jr(e,r){if(e==null)return{};var t={},n=Object.keys(e),o,i;for(i=0;i<n.length;i++)o=n[i],!(r.indexOf(o)>=0)&&(t[o]=e[o]);return t}var _e=new Set;function Nr(e){return typeof e=="string"&&e.length&&!_e.has(e)}function St(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=e[r];if(Nr(t)){var n=document.createElement("script");n.setAttribute("src",t),n.setAttribute("data-namespace",t),e.length>r+1&&(n.onload=function(){St(e,r+1)},n.onerror=function(){St(e,r+1)}),_e.add(t),document.body.appendChild(n)}}function Wr(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=e.scriptUrl,t=e.extraCommonProps,n=t===void 0?{}:t;typeof document!="undefined"&&typeof window!="undefined"&&typeof document.createElement=="function"&&(Array.isArray(r)?St(r.reverse()):St([r]));var o=function(a,u){var l=u.attrs,s=u.slots,f=xe({},a,l),m=f.type,y=Xr(f,["type"]),w=s.default&&s.default(),x=null;m&&(x=C("use",{"xlink:href":"#".concat(m)},null)),w&&w.length&&(x=w);var _=xe({},n,y);return C($r,_,{default:function(){return[x]}})};return o.props={spin:Boolean,rotate:Number,type:String},o.inheritAttrs=!1,o.displayName="Iconfont",o}function Ce(){return{MyIcon:Wr({scriptUrl:"//at.alicdn.com/t/font_2697113_7qeujo2lc8p.js"})}}var Se={exports:{}};(function(e,r){(function(t,n){e.exports=n()})(ot,function(){return function(t,n,o){t=t||{};var i=n.prototype,a={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"};function u(s,f,m,y){return i.fromToBase(s,f,m,y)}o.en.relativeTime=a,i.fromToBase=function(s,f,m,y,w){for(var x,_,b,v=m.$locale().relativeTime||a,g=t.thresholds||[{l:"s",r:44,d:"second"},{l:"m",r:89},{l:"mm",r:44,d:"minute"},{l:"h",r:89},{l:"hh",r:21,d:"hour"},{l:"d",r:35},{l:"dd",r:25,d:"day"},{l:"M",r:45},{l:"MM",r:10,d:"month"},{l:"y",r:17},{l:"yy",d:"year"}],c=g.length,h=0;h<c;h+=1){var p=g[h];p.d&&(x=y?o(s).diff(m,p.d,!0):m.diff(s,p.d,!0));var d=(t.rounding||Math.round)(Math.abs(x));if(b=x>0,d<=p.r||!p.r){d<=1&&h>0&&(p=g[h-1]);var H=v[p.l];w&&(d=w(""+d)),_=typeof H=="string"?H.replace("%d",d):H(d,f,p.l,b);break}}if(f)return _;var R=b?v.future:v.past;return typeof R=="function"?R(_):R.replace("%s",_)},i.to=function(s,f){return u(s,f,this,!0)},i.from=function(s,f){return u(s,f,this)};var l=function(s){return s.$u?o.utc():o()};i.toNow=function(s){return this.to(l(this),s)},i.fromNow=function(s){return this.from(l(this),s)}}})})(Se);var Dr=Se.exports,qr={exports:{}};(function(e,r){(function(t,n){e.exports=n(tr.exports)})(ot,function(t){function n(a){return a&&typeof a=="object"&&"default"in a?a:{default:a}}var o=n(t),i={name:"zh-cn",weekdays:"\u661F\u671F\u65E5_\u661F\u671F\u4E00_\u661F\u671F\u4E8C_\u661F\u671F\u4E09_\u661F\u671F\u56DB_\u661F\u671F\u4E94_\u661F\u671F\u516D".split("_"),weekdaysShort:"\u5468\u65E5_\u5468\u4E00_\u5468\u4E8C_\u5468\u4E09_\u5468\u56DB_\u5468\u4E94_\u5468\u516D".split("_"),weekdaysMin:"\u65E5_\u4E00_\u4E8C_\u4E09_\u56DB_\u4E94_\u516D".split("_"),months:"\u4E00\u6708_\u4E8C\u6708_\u4E09\u6708_\u56DB\u6708_\u4E94\u6708_\u516D\u6708_\u4E03\u6708_\u516B\u6708_\u4E5D\u6708_\u5341\u6708_\u5341\u4E00\u6708_\u5341\u4E8C\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),ordinal:function(a,u){switch(u){case"W":return a+"\u5468";default:return a+"\u65E5"}},weekStart:1,yearStart:4,formats:{LT:"HH:mm",LTS:"HH:mm:ss",L:"YYYY/MM/DD",LL:"YYYY\u5E74M\u6708D\u65E5",LLL:"YYYY\u5E74M\u6708D\u65E5Ah\u70B9mm\u5206",LLLL:"YYYY\u5E74M\u6708D\u65E5ddddAh\u70B9mm\u5206",l:"YYYY/M/D",ll:"YYYY\u5E74M\u6708D\u65E5",lll:"YYYY\u5E74M\u6708D\u65E5 HH:mm",llll:"YYYY\u5E74M\u6708D\u65E5dddd HH:mm"},relativeTime:{future:"%s\u5185",past:"%s\u524D",s:"\u51E0\u79D2",m:"1 \u5206\u949F",mm:"%d \u5206\u949F",h:"1 \u5C0F\u65F6",hh:"%d \u5C0F\u65F6",d:"1 \u5929",dd:"%d \u5929",M:"1 \u4E2A\u6708",MM:"%d \u4E2A\u6708",y:"1 \u5E74",yy:"%d \u5E74"},meridiem:function(a,u){var l=100*a+u;return l<600?"\u51CC\u6668":l<900?"\u65E9\u4E0A":l<1100?"\u4E0A\u5348":l<1300?"\u4E2D\u5348":l<1800?"\u4E0B\u5348":"\u665A\u4E0A"}};return o.default.locale(i,null,!0),i})})(qr);Q.extend(Dr);Q.locale("zh-cn");function ke(){return{timeAgo:o=>Q(o).fromNow(),timeDate:o=>Q(o).format("YYYY-MM-DD"),timeFull:o=>Q(o).format("YYYY-MM-DD HH:mm:ss"),timeFile:o=>Q(o).format("YYYY_MM_DD_HH_mm_ss_SSS")}}const Te={};Te.getData=e=>new Promise((r,t)=>{let n={};(function(o){let i=null;return new Promise((a,u)=>{if(o.src)if(/^data\:/i.test(o.src))i=function(f){f=f.replace(/^data\:([^\;]+)\;base64,/gim,"");for(var m=atob(f),y=m.length,w=new ArrayBuffer(y),x=new Uint8Array(w),_=0;_<y;_++)x[_]=m.charCodeAt(_);return w}(o.src),a(i);else if(/^blob\:/i.test(o.src)){var l=new FileReader;l.onload=function(f){i=f.target.result,a(i)},function(f,m){var y=new XMLHttpRequest;y.open("GET",f,!0),y.responseType="blob",y.onload=function(w){this.status!=200&&this.status!==0||m(this.response)},y.send()}(o.src,function(f){l.readAsArrayBuffer(f)})}else{var s=new XMLHttpRequest;s.onload=function(){if(this.status!=200&&this.status!==0)throw"Could not load image";i=s.response,a(i),s=null},s.open("GET",o.src,!0),s.responseType="arraybuffer",s.send(null)}else u("img error")})})(e).then(o=>{n.arrayBuffer=o,n.orientation=function(i){var a,u,l,s,f,m,y,w,x,_=new DataView(i),b=_.byteLength;if(_.getUint8(0)===255&&_.getUint8(1)===216)for(w=2;w<b;){if(_.getUint8(w)===255&&_.getUint8(w+1)===225){m=w;break}w++}if(m&&(u=m+10,function(v,g,c){var h,p="";for(h=g,c+=g;h<c;h++)p+=String.fromCharCode(v.getUint8(h));return p}(_,m+4,4)==="Exif"&&((s=(f=_.getUint16(u))===18761)||f===19789)&&_.getUint16(u+2,s)===42&&(l=_.getUint32(u+4,s))>=8&&(y=u+l)),y){for(b=_.getUint16(y,s),x=0;x<b;x++)if(w=y+12*x+2,_.getUint16(w,s)===274){w+=8,a=_.getUint16(w,s);break}}return a}(o),r(n)}).catch(o=>{t(o)})});const ht=er({data:function(){return{w:0,h:0,scale:1,x:0,y:0,loading:!0,trueWidth:0,trueHeight:0,move:!0,moveX:0,moveY:0,crop:!1,cropping:!1,cropW:0,cropH:0,cropOldW:0,cropOldH:0,canChangeX:!1,canChangeY:!1,changeCropTypeX:1,changeCropTypeY:1,cropX:0,cropY:0,cropChangeX:0,cropChangeY:0,cropOffsertX:0,cropOffsertY:0,support:"",touches:[],touchNow:!1,rotate:0,isIos:!1,orientation:0,imgs:"",coe:.2,scaling:!1,scalingSet:"",coeStatus:"",isCanShow:!0}},props:{img:{type:[String,Blob,null,File],default:""},outputSize:{type:Number,default:1},outputType:{type:String,default:"jpeg"},info:{type:Boolean,default:!0},canScale:{type:Boolean,default:!0},autoCrop:{type:Boolean,default:!1},autoCropWidth:{type:[Number,String],default:0},autoCropHeight:{type:[Number,String],default:0},fixed:{type:Boolean,default:!1},fixedNumber:{type:Array,default:()=>[1,1]},fixedBox:{type:Boolean,default:!1},full:{type:Boolean,default:!1},canMove:{type:Boolean,default:!0},canMoveBox:{type:Boolean,default:!0},original:{type:Boolean,default:!1},centerBox:{type:Boolean,default:!1},high:{type:Boolean,default:!0},infoTrue:{type:Boolean,default:!1},maxImgSize:{type:[Number,String],default:2e3},enlarge:{type:[Number,String],default:1},preW:{type:[Number,String],default:0},mode:{type:String,default:"contain"},limitMinSize:{type:[Number,Array,String],default:()=>10}},computed:{cropInfo(){let e={};if(e.top=this.cropOffsertY>21?"-21px":"0px",e.width=this.cropW>0?this.cropW:0,e.height=this.cropH>0?this.cropH:0,this.infoTrue){let r=1;this.high&&!this.full&&(r=window.devicePixelRatio),this.enlarge!==1&!this.full&&(r=Math.abs(Number(this.enlarge))),e.width=e.width*r,e.height=e.height*r,this.full&&(e.width=e.width/this.scale,e.height=e.height/this.scale)}return e.width=e.width.toFixed(0),e.height=e.height.toFixed(0),e},isIE:()=>!!window.ActiveXObject||"ActiveXObject"in window,passive(){return this.isIE?null:{passive:!1}}},watch:{img(){this.checkedImg()},imgs(e){e!==""&&this.reload()},cropW(){this.showPreview()},cropH(){this.showPreview()},cropOffsertX(){this.showPreview()},cropOffsertY(){this.showPreview()},scale(e,r){this.showPreview()},x(){this.showPreview()},y(){this.showPreview()},autoCrop(e){e&&this.goAutoCrop()},autoCropWidth(){this.autoCrop&&this.goAutoCrop()},autoCropHeight(){this.autoCrop&&this.goAutoCrop()},mode(){this.checkedImg()},rotate(){this.showPreview(),(this.autoCrop||this.cropW>0||this.cropH>0)&&this.goAutoCrop(this.cropW,this.cropH)}},methods:{getVersion(e){var r=navigator.userAgent.split(" "),t="";let n=0;const o=new RegExp(e,"i");for(var i=0;i<r.length;i++)o.test(r[i])&&(t=r[i]);return n=t?t.split("/")[1].split("."):["0","0","0"],n},checkOrientationImage(e,r,t,n){if(this.getVersion("chrome")[0]>=81)r=-1;else if(this.getVersion("safari")[0]>=605){const a=this.getVersion("version");a[0]>13&&a[1]>1&&(r=-1)}else{const a=navigator.userAgent.toLowerCase().match(/cpu iphone os (.*?) like mac os/);if(a){let u=a[1];u=u.split("_"),(u[0]>13||u[0]>=13&&u[1]>=4)&&(r=-1)}}let o=document.createElement("canvas"),i=o.getContext("2d");switch(i.save(),r){case 2:o.width=t,o.height=n,i.translate(t,0),i.scale(-1,1);break;case 3:o.width=t,o.height=n,i.translate(t/2,n/2),i.rotate(180*Math.PI/180),i.translate(-t/2,-n/2);break;case 4:o.width=t,o.height=n,i.translate(0,n),i.scale(1,-1);break;case 5:o.height=t,o.width=n,i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:o.width=n,o.height=t,i.translate(n/2,t/2),i.rotate(90*Math.PI/180),i.translate(-t/2,-n/2);break;case 7:o.height=t,o.width=n,i.rotate(.5*Math.PI),i.translate(t,-n),i.scale(-1,1);break;case 8:o.height=t,o.width=n,i.translate(n/2,t/2),i.rotate(-90*Math.PI/180),i.translate(-t/2,-n/2);break;default:o.width=t,o.height=n}i.drawImage(e,0,0,t,n),i.restore(),o.toBlob(a=>{let u=URL.createObjectURL(a);URL.revokeObjectURL(this.imgs),this.imgs=u},"image/"+this.outputType,1)},checkedImg(){if(this.img===null||this.img==="")return this.imgs="",void this.clearCrop();this.loading=!0,this.scale=1,this.rotate=0,this.clearCrop();let e=new Image;if(e.onload=()=>{if(this.img==="")return this.$emit("imgLoad","error"),this.$emit("img-load","error"),!1;let t=e.width,n=e.height;Te.getData(e).then(o=>{this.orientation=o.orientation||1;let i=Number(this.maxImgSize);!this.orientation&&t<i&n<i?this.imgs=this.img:(t>i&&(n=n/t*i,t=i),n>i&&(t=t/n*i,n=i),this.checkOrientationImage(e,this.orientation,t,n))})},e.onerror=()=>{this.$emit("imgLoad","error"),this.$emit("img-load","error")},this.img.substr(0,4)!=="data"&&(e.crossOrigin=""),this.isIE){var r=new XMLHttpRequest;r.onload=function(){var t=URL.createObjectURL(this.response);e.src=t},r.open("GET",this.img,!0),r.responseType="blob",r.send()}else e.src=this.img},startMove(e){if(e.preventDefault(),this.move&&!this.crop){if(!this.canMove)return!1;this.moveX=("clientX"in e?e.clientX:e.touches[0].clientX)-this.x,this.moveY=("clientY"in e?e.clientY:e.touches[0].clientY)-this.y,e.touches?(window.addEventListener("touchmove",this.moveImg),window.addEventListener("touchend",this.leaveImg),e.touches.length==2&&(this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale))):(window.addEventListener("mousemove",this.moveImg),window.addEventListener("mouseup",this.leaveImg)),this.$emit("imgMoving",{moving:!0,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})}else this.cropping=!0,window.addEventListener("mousemove",this.createCrop),window.addEventListener("mouseup",this.endCrop),window.addEventListener("touchmove",this.createCrop),window.addEventListener("touchend",this.endCrop),this.cropOffsertX=e.offsetX?e.offsetX:e.touches[0].pageX-this.$refs.cropper.offsetLeft,this.cropOffsertY=e.offsetY?e.offsetY:e.touches[0].pageY-this.$refs.cropper.offsetTop,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.cropW=0,this.cropH=0},touchScale(e){e.preventDefault();let r=this.scale;var t=this.touches[0].clientX,n=this.touches[0].clientY,o=e.touches[0].clientX,i=e.touches[0].clientY,a=this.touches[1].clientX,u=this.touches[1].clientY,l=e.touches[1].clientX,s=e.touches[1].clientY,f=Math.sqrt(Math.pow(t-a,2)+Math.pow(n-u,2)),m=Math.sqrt(Math.pow(o-l,2)+Math.pow(i-s,2))-f,y=1,w=(y=(y=y/this.trueWidth>y/this.trueHeight?y/this.trueHeight:y/this.trueWidth)>.1?.1:y)*m;if(!this.touchNow){if(this.touchNow=!0,m>0?r+=Math.abs(w):m<0&&r>Math.abs(w)&&(r-=Math.abs(w)),this.touches=e.touches,setTimeout(()=>{this.touchNow=!1},8),!this.checkoutImgAxis(this.x,this.y,r))return!1;this.scale=r}},cancelTouchScale(e){window.removeEventListener("touchmove",this.touchScale)},moveImg(e){if(e.preventDefault(),e.touches&&e.touches.length===2)return this.touches=e.touches,window.addEventListener("touchmove",this.touchScale),window.addEventListener("touchend",this.cancelTouchScale),window.removeEventListener("touchmove",this.moveImg),!1;let r,t,n="clientX"in e?e.clientX:e.touches[0].clientX,o="clientY"in e?e.clientY:e.touches[0].clientY;r=n-this.moveX,t=o-this.moveY,this.$nextTick(()=>{if(this.centerBox){let i,a,u,l,s=this.getImgAxis(r,t,this.scale),f=this.getCropAxis(),m=this.trueHeight*this.scale,y=this.trueWidth*this.scale;switch(this.rotate){case 1:case-1:case 3:case-3:i=this.cropOffsertX-this.trueWidth*(1-this.scale)/2+(m-y)/2,a=this.cropOffsertY-this.trueHeight*(1-this.scale)/2+(y-m)/2,u=i-m+this.cropW,l=a-y+this.cropH;break;default:i=this.cropOffsertX-this.trueWidth*(1-this.scale)/2,a=this.cropOffsertY-this.trueHeight*(1-this.scale)/2,u=i-y+this.cropW,l=a-m+this.cropH}s.x1>=f.x1&&(r=i),s.y1>=f.y1&&(t=a),s.x2<=f.x2&&(r=u),s.y2<=f.y2&&(t=l)}this.x=r,this.y=t,this.$emit("imgMoving",{moving:!0,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!0,axis:this.getImgAxis()})})},leaveImg(e){window.removeEventListener("mousemove",this.moveImg),window.removeEventListener("touchmove",this.moveImg),window.removeEventListener("mouseup",this.leaveImg),window.removeEventListener("touchend",this.leaveImg),this.$emit("imgMoving",{moving:!1,axis:this.getImgAxis()}),this.$emit("img-moving",{moving:!1,axis:this.getImgAxis()})},scaleImg(){this.canScale&&window.addEventListener(this.support,this.changeSize,this.passive)},cancelScale(){this.canScale&&window.removeEventListener(this.support,this.changeSize)},changeSize(e){e.preventDefault();let r=this.scale;var t=e.deltaY||e.wheelDelta;t=navigator.userAgent.indexOf("Firefox")>0?30*t:t,this.isIE&&(t=-t);var n=this.coe,o=(n=n/this.trueWidth>n/this.trueHeight?n/this.trueHeight:n/this.trueWidth)*t;o<0?r+=Math.abs(o):r>Math.abs(o)&&(r-=Math.abs(o));let i=o<0?"add":"reduce";if(i!==this.coeStatus&&(this.coeStatus=i,this.coe=.2),this.scaling||(this.scalingSet=setTimeout(()=>{this.scaling=!1,this.coe=this.coe+=.01},50)),this.scaling=!0,!this.checkoutImgAxis(this.x,this.y,r))return!1;this.scale=r},changeScale(e){let r=this.scale;e=e||1;var t=20;if((e*=t=t/this.trueWidth>t/this.trueHeight?t/this.trueHeight:t/this.trueWidth)>0?r+=Math.abs(e):r>Math.abs(e)&&(r-=Math.abs(e)),!this.checkoutImgAxis(this.x,this.y,r))return!1;this.scale=r},createCrop(e){e.preventDefault();var r="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,t="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;this.$nextTick(()=>{var n=r-this.cropX,o=t-this.cropY;if(n>0?(this.cropW=n+this.cropChangeX>this.w?this.w-this.cropChangeX:n,this.cropOffsertX=this.cropChangeX):(this.cropW=this.w-this.cropChangeX+Math.abs(n)>this.w?this.cropChangeX:Math.abs(n),this.cropOffsertX=this.cropChangeX+n>0?this.cropChangeX+n:0),this.fixed){var i=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];i+this.cropOffsertY>this.h?(this.cropH=this.h-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0],this.cropOffsertX=n>0?this.cropChangeX:this.cropChangeX-this.cropW):this.cropH=i,this.cropOffsertY=this.cropOffsertY}else o>0?(this.cropH=o+this.cropChangeY>this.h?this.h-this.cropChangeY:o,this.cropOffsertY=this.cropChangeY):(this.cropH=this.h-this.cropChangeY+Math.abs(o)>this.h?this.cropChangeY:Math.abs(o),this.cropOffsertY=this.cropChangeY+o>0?this.cropChangeY+o:0)})},changeCropSize(e,r,t,n,o){e.preventDefault(),window.addEventListener("mousemove",this.changeCropNow),window.addEventListener("mouseup",this.changeCropEnd),window.addEventListener("touchmove",this.changeCropNow),window.addEventListener("touchend",this.changeCropEnd),this.canChangeX=r,this.canChangeY=t,this.changeCropTypeX=n,this.changeCropTypeY=o,this.cropX="clientX"in e?e.clientX:e.touches[0].clientX,this.cropY="clientY"in e?e.clientY:e.touches[0].clientY,this.cropOldW=this.cropW,this.cropOldH=this.cropH,this.cropChangeX=this.cropOffsertX,this.cropChangeY=this.cropOffsertY,this.fixed&&this.canChangeX&&this.canChangeY&&(this.canChangeY=0),this.$emit("change-crop-size",{width:this.cropW,height:this.cropH})},changeCropNow(e){e.preventDefault();var r="clientX"in e?e.clientX:e.touches?e.touches[0].clientX:0,t="clientY"in e?e.clientY:e.touches?e.touches[0].clientY:0;let n=this.w,o=this.h,i=0,a=0;if(this.centerBox){let u=this.getImgAxis(),l=u.x2,s=u.y2;i=u.x1>0?u.x1:0,a=u.y1>0?u.y1:0,n>l&&(n=l),o>s&&(o=s)}this.$nextTick(()=>{var u=r-this.cropX,l=t-this.cropY;if(this.canChangeX&&(this.changeCropTypeX===1?this.cropOldW-u>0?(this.cropW=n-this.cropChangeX-u<=n-i?this.cropOldW-u:this.cropOldW+this.cropChangeX-i,this.cropOffsertX=n-this.cropChangeX-u<=n-i?this.cropChangeX+u:i):(this.cropW=Math.abs(u)+this.cropChangeX<=n?Math.abs(u)-this.cropOldW:n-this.cropOldW-this.cropChangeX,this.cropOffsertX=this.cropChangeX+this.cropOldW):this.changeCropTypeX===2&&(this.cropOldW+u>0?(this.cropW=this.cropOldW+u+this.cropOffsertX<=n?this.cropOldW+u:n-this.cropOffsertX,this.cropOffsertX=this.cropChangeX):(this.cropW=n-this.cropChangeX+Math.abs(u+this.cropOldW)<=n-i?Math.abs(u+this.cropOldW):this.cropChangeX-i,this.cropOffsertX=n-this.cropChangeX+Math.abs(u+this.cropOldW)<=n-i?this.cropChangeX-Math.abs(u+this.cropOldW):i))),this.canChangeY&&(this.changeCropTypeY===1?this.cropOldH-l>0?(this.cropH=o-this.cropChangeY-l<=o-a?this.cropOldH-l:this.cropOldH+this.cropChangeY-a,this.cropOffsertY=o-this.cropChangeY-l<=o-a?this.cropChangeY+l:a):(this.cropH=Math.abs(l)+this.cropChangeY<=o?Math.abs(l)-this.cropOldH:o-this.cropOldH-this.cropChangeY,this.cropOffsertY=this.cropChangeY+this.cropOldH):this.changeCropTypeY===2&&(this.cropOldH+l>0?(this.cropH=this.cropOldH+l+this.cropOffsertY<=o?this.cropOldH+l:o-this.cropOffsertY,this.cropOffsertY=this.cropChangeY):(this.cropH=o-this.cropChangeY+Math.abs(l+this.cropOldH)<=o-a?Math.abs(l+this.cropOldH):this.cropChangeY-a,this.cropOffsertY=o-this.cropChangeY+Math.abs(l+this.cropOldH)<=o-a?this.cropChangeY-Math.abs(l+this.cropOldH):a))),this.canChangeX&&this.fixed){var s=this.cropW/this.fixedNumber[0]*this.fixedNumber[1];s+this.cropOffsertY>o?(this.cropH=o-this.cropOffsertY,this.cropW=this.cropH/this.fixedNumber[1]*this.fixedNumber[0]):this.cropH=s}if(this.canChangeY&&this.fixed){var f=this.cropH/this.fixedNumber[1]*this.fixedNumber[0];f+this.cropOffsertX>n?(this.cropW=n-this.cropOffsertX,this.cropH=this.cropW/this.fixedNumber[0]*this.fixedNumber[1]):this.cropW=f}})},checkCropLimitSize(){let{cropW:e,cropH:r,limitMinSize:t}=this,n=new Array;return n=Array.isArray[t]?t:[t,t],e=parseFloat(n[0]),r=parseFloat(n[1]),[e,r]},changeCropEnd(e){window.removeEventListener("mousemove",this.changeCropNow),window.removeEventListener("mouseup",this.changeCropEnd),window.removeEventListener("touchmove",this.changeCropNow),window.removeEventListener("touchend",this.changeCropEnd)},endCrop(){this.cropW===0&&this.cropH===0&&(this.cropping=!1),window.removeEventListener("mousemove",this.createCrop),window.removeEventListener("mouseup",this.endCrop),window.removeEventListener("touchmove",this.createCrop),window.removeEventListener("touchend",this.endCrop)},startCrop(){this.crop=!0},stopCrop(){this.crop=!1},clearCrop(){this.cropping=!1,this.cropW=0,this.cropH=0},cropMove(e){if(e.preventDefault(),!this.canMoveBox)return this.crop=!1,this.startMove(e),!1;if(e.touches&&e.touches.length===2)return this.crop=!1,this.startMove(e),this.leaveCrop(),!1;window.addEventListener("mousemove",this.moveCrop),window.addEventListener("mouseup",this.leaveCrop),window.addEventListener("touchmove",this.moveCrop),window.addEventListener("touchend",this.leaveCrop);let r,t,n="clientX"in e?e.clientX:e.touches[0].clientX,o="clientY"in e?e.clientY:e.touches[0].clientY;r=n-this.cropOffsertX,t=o-this.cropOffsertY,this.cropX=r,this.cropY=t,this.$emit("cropMoving",{moving:!0,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})},moveCrop(e,r){let t=0,n=0;e&&(e.preventDefault(),t="clientX"in e?e.clientX:e.touches[0].clientX,n="clientY"in e?e.clientY:e.touches[0].clientY),this.$nextTick(()=>{let o,i,a=t-this.cropX,u=n-this.cropY;if(r&&(a=this.cropOffsertX,u=this.cropOffsertY),o=a<=0?0:a+this.cropW>this.w?this.w-this.cropW:a,i=u<=0?0:u+this.cropH>this.h?this.h-this.cropH:u,this.centerBox){let l=this.getImgAxis();o<=l.x1&&(o=l.x1),o+this.cropW>l.x2&&(o=l.x2-this.cropW),i<=l.y1&&(i=l.y1),i+this.cropH>l.y2&&(i=l.y2-this.cropH)}this.cropOffsertX=o,this.cropOffsertY=i,this.$emit("cropMoving",{moving:!0,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!0,axis:this.getCropAxis()})})},getImgAxis(e,r,t){e=e||this.x,r=r||this.y,t=t||this.scale;let n={x1:0,x2:0,y1:0,y2:0},o=this.trueWidth*t,i=this.trueHeight*t;switch(this.rotate){case 0:n.x1=e+this.trueWidth*(1-t)/2,n.x2=n.x1+this.trueWidth*t,n.y1=r+this.trueHeight*(1-t)/2,n.y2=n.y1+this.trueHeight*t;break;case 1:case-1:case 3:case-3:n.x1=e+this.trueWidth*(1-t)/2+(o-i)/2,n.x2=n.x1+this.trueHeight*t,n.y1=r+this.trueHeight*(1-t)/2+(i-o)/2,n.y2=n.y1+this.trueWidth*t;break;default:n.x1=e+this.trueWidth*(1-t)/2,n.x2=n.x1+this.trueWidth*t,n.y1=r+this.trueHeight*(1-t)/2,n.y2=n.y1+this.trueHeight*t}return n},getCropAxis(){let e={x1:0,x2:0,y1:0,y2:0};return e.x1=this.cropOffsertX,e.x2=e.x1+this.cropW,e.y1=this.cropOffsertY,e.y2=e.y1+this.cropH,e},leaveCrop(e){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.$emit("cropMoving",{moving:!1,axis:this.getCropAxis()}),this.$emit("crop-moving",{moving:!1,axis:this.getCropAxis()})},getCropChecked(e){let r=document.createElement("canvas"),t=new Image,n=this.rotate,o=this.trueWidth,i=this.trueHeight,a=this.cropOffsertX,u=this.cropOffsertY;function l(s,f){r.width=Math.round(s),r.height=Math.round(f)}t.onload=()=>{if(this.cropW!==0){let s=r.getContext("2d"),f=1;this.high&!this.full&&(f=window.devicePixelRatio),this.enlarge!==1&!this.full&&(f=Math.abs(Number(this.enlarge)));let m=this.cropW*f,y=this.cropH*f,w=o*this.scale*f,x=i*this.scale*f,_=(this.x-a+this.trueWidth*(1-this.scale)/2)*f,b=(this.y-u+this.trueHeight*(1-this.scale)/2)*f;switch(l(m,y),s.save(),n){case 0:this.full?(l(m/this.scale,y/this.scale),s.drawImage(t,_/this.scale,b/this.scale,w/this.scale,x/this.scale)):s.drawImage(t,_,b,w,x);break;case 1:case-3:this.full?(l(m/this.scale,y/this.scale),_=_/this.scale+(w/this.scale-x/this.scale)/2,b=b/this.scale+(x/this.scale-w/this.scale)/2,s.rotate(90*n*Math.PI/180),s.drawImage(t,b,-_-x/this.scale,w/this.scale,x/this.scale)):(_+=(w-x)/2,b+=(x-w)/2,s.rotate(90*n*Math.PI/180),s.drawImage(t,b,-_-x,w,x));break;case 2:case-2:this.full?(l(m/this.scale,y/this.scale),s.rotate(90*n*Math.PI/180),_/=this.scale,b/=this.scale,s.drawImage(t,-_-w/this.scale,-b-x/this.scale,w/this.scale,x/this.scale)):(s.rotate(90*n*Math.PI/180),s.drawImage(t,-_-w,-b-x,w,x));break;case 3:case-1:this.full?(l(m/this.scale,y/this.scale),_=_/this.scale+(w/this.scale-x/this.scale)/2,b=b/this.scale+(x/this.scale-w/this.scale)/2,s.rotate(90*n*Math.PI/180),s.drawImage(t,-b-w/this.scale,_,w/this.scale,x/this.scale)):(_+=(w-x)/2,b+=(x-w)/2,s.rotate(90*n*Math.PI/180),s.drawImage(t,-b-w,_,w,x));break;default:this.full?(l(m/this.scale,y/this.scale),s.drawImage(t,_/this.scale,b/this.scale,w/this.scale,x/this.scale)):s.drawImage(t,_,b,w,x)}s.restore()}else{let s=o*this.scale,f=i*this.scale,m=r.getContext("2d");switch(m.save(),n){case 0:l(s,f),m.drawImage(t,0,0,s,f);break;case 1:case-3:l(f,s),m.rotate(90*n*Math.PI/180),m.drawImage(t,0,-f,s,f);break;case 2:case-2:l(s,f),m.rotate(90*n*Math.PI/180),m.drawImage(t,-s,-f,s,f);break;case 3:case-1:l(f,s),m.rotate(90*n*Math.PI/180),m.drawImage(t,-s,0,s,f);break;default:l(s,f),m.drawImage(t,0,0,s,f)}m.restore()}e(r)},this.img.substr(0,4)!=="data"&&(t.crossOrigin="Anonymous"),t.src=this.imgs},getCropData(e){this.getCropChecked(r=>{e(r.toDataURL("image/"+this.outputType,this.outputSize))})},getCropBlob(e){this.getCropChecked(r=>{r.toBlob(t=>e(t),"image/"+this.outputType,this.outputSize)})},showPreview(){if(!this.isCanShow)return!1;this.isCanShow=!1,setTimeout(()=>{this.isCanShow=!0},16);let e=this.cropW,r=this.cropH,t=this.scale;var n={};n.div={width:`${e}px`,height:`${r}px`};let o=(this.x-this.cropOffsertX)/t,i=(this.y-this.cropOffsertY)/t;n.w=e,n.h=r,n.url=this.imgs,n.img={width:`${this.trueWidth}px`,height:`${this.trueHeight}px`,transform:`scale(${t})translate3d(${o}px, ${i}px, 0px)rotateZ(${90*this.rotate}deg)`},n.html=`
      <div class="show-preview" style="width: ${n.w}px; height: ${n.h}px,; overflow: hidden">
        <div style="width: ${e}px; height: ${r}px">
          <img src=${n.url} style="width: ${this.trueWidth}px; height: ${this.trueHeight}px; transform:
          scale(${t})translate3d(${o}px, ${i}px, 0px)rotateZ(${90*this.rotate}deg)">
        </div>
      </div>`,this.$emit("realTime",n),this.$emit("real-time",n)},reload(){let e=new Image;e.onload=()=>{this.w=parseFloat(window.getComputedStyle(this.$refs.cropper).width),this.h=parseFloat(window.getComputedStyle(this.$refs.cropper).height),this.trueWidth=e.width,this.trueHeight=e.height,this.original?this.scale=1:this.scale=this.checkedMode(),this.$nextTick(()=>{this.x=-(this.trueWidth-this.trueWidth*this.scale)/2+(this.w-this.trueWidth*this.scale)/2,this.y=-(this.trueHeight-this.trueHeight*this.scale)/2+(this.h-this.trueHeight*this.scale)/2,this.loading=!1,this.autoCrop&&this.goAutoCrop(),this.$emit("img-load","success"),this.$emit("imgLoad","success"),setTimeout(()=>{this.showPreview()},20)})},e.onerror=()=>{this.$emit("imgLoad","error"),this.$emit("img-load","error")},e.src=this.imgs},checkedMode(){let e=1,r=this.trueWidth,t=this.trueHeight;const n=this.mode.split(" ");switch(n[0]){case"contain":this.trueWidth>this.w&&(e=this.w/this.trueWidth),this.trueHeight*e>this.h&&(e=this.h/this.trueHeight);break;case"cover":r=this.w,e=r/this.trueWidth,t*=e,t<this.h&&(t=this.h,e=t/this.trueHeight);break;default:try{let o=n[0];if(o.search("px")!==-1){o=o.replace("px",""),r=parseFloat(o);const i=r/this.trueWidth;let a=1,u=n[1];u.search("px")!==-1&&(u=u.replace("px",""),t=parseFloat(u),a=t/this.trueHeight),e=Math.min(i,a)}if(o.search("%")!==-1&&(o=o.replace("%",""),r=parseFloat(o)/100*this.w,e=r/this.trueWidth),n.length===2&&o==="auto"){let i=n[1];i.search("px")!==-1&&(i=i.replace("px",""),t=parseFloat(i),e=t/this.trueHeight),i.search("%")!==-1&&(i=i.replace("%",""),t=parseFloat(i)/100*this.h,e=t/this.trueHeight)}}catch{e=1}}return e},goAutoCrop(e,r){if(this.imgs===""||this.imgs===null)return;this.clearCrop(),this.cropping=!0;let t=this.w,n=this.h;if(this.centerBox){const a=Math.abs(this.rotate)%2>0;let u=(a?this.trueHeight:this.trueWidth)*this.scale,l=(a?this.trueWidth:this.trueHeight)*this.scale;t=u<t?u:t,n=l<n?l:n}var o=e||parseFloat(this.autoCropWidth),i=r||parseFloat(this.autoCropHeight);o!==0&&i!==0||(o=.8*t,i=.8*n),o=o>t?t:o,i=i>n?n:i,this.fixed&&(i=o/this.fixedNumber[0]*this.fixedNumber[1]),i>this.h&&(o=(i=this.h)/this.fixedNumber[1]*this.fixedNumber[0]),this.changeCrop(o,i)},changeCrop(e,r){if(this.centerBox){let t=this.getImgAxis();e>t.x2-t.x1&&(r=(e=t.x2-t.x1)/this.fixedNumber[0]*this.fixedNumber[1]),r>t.y2-t.y1&&(e=(r=t.y2-t.y1)/this.fixedNumber[1]*this.fixedNumber[0])}this.cropW=e,this.cropH=r,this.checkCropLimitSize(),this.$nextTick(()=>{this.cropOffsertX=(this.w-this.cropW)/2,this.cropOffsertY=(this.h-this.cropH)/2,this.centerBox&&this.moveCrop(null,!0)})},refresh(){this.img,this.imgs="",this.scale=1,this.crop=!1,this.rotate=0,this.w=0,this.h=0,this.trueWidth=0,this.trueHeight=0,this.clearCrop(),this.$nextTick(()=>{this.checkedImg()})},rotateLeft(){this.rotate=this.rotate<=-3?0:this.rotate-1},rotateRight(){this.rotate=this.rotate>=3?0:this.rotate+1},rotateClear(){this.rotate=0},checkoutImgAxis(e,r,t){e=e||this.x,r=r||this.y,t=t||this.scale;let n=!0;if(this.centerBox){let o=this.getImgAxis(e,r,t),i=this.getCropAxis();o.x1>=i.x1&&(n=!1),o.x2<=i.x2&&(n=!1),o.y1>=i.y1&&(n=!1),o.y2<=i.y2&&(n=!1)}return n}},mounted(){this.support="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==void 0?"mousewheel":"DOMMouseScroll";let e=this;var r=navigator.userAgent;this.isIOS=!!r.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,n,o){for(var i=atob(this.toDataURL(n,o).split(",")[1]),a=i.length,u=new Uint8Array(a),l=0;l<a;l++)u[l]=i.charCodeAt(l);t(new Blob([u],{type:e.type||"image/png"}))}}),this.showPreview(),this.checkedImg()},destroyed(){window.removeEventListener("mousemove",this.moveCrop),window.removeEventListener("mouseup",this.leaveCrop),window.removeEventListener("touchmove",this.moveCrop),window.removeEventListener("touchend",this.leaveCrop),this.cancelScale()}});Lt("data-v-48aab112");const Vr={key:0,class:"cropper-box"},Gr=["src"],Jr={class:"cropper-view-box"},Zr=["src"],Kr={key:1};Pt(),ht.render=function(e,r,t,n,o,i){return N(),D("div",{class:"vue-cropper",ref:"cropper",onMouseover:r[28]||(r[28]=(...a)=>e.scaleImg&&e.scaleImg(...a)),onMouseout:r[29]||(r[29]=(...a)=>e.cancelScale&&e.cancelScale(...a))},[e.imgs?(N(),D("div",Vr,[tt(E("div",{class:"cropper-box-canvas",style:yt({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+e.x/e.scale+"px,"+e.y/e.scale+"px,0)rotateZ("+90*e.rotate+"deg)"})},[E("img",{src:e.imgs,alt:"cropper-img",ref:"cropperImg"},null,8,Gr)],4),[[mt,!e.loading]])])):Ft("",!0),E("div",{class:rr(["cropper-drag-box",{"cropper-move":e.move&&!e.crop,"cropper-crop":e.crop,"cropper-modal":e.cropping}]),onMousedown:r[0]||(r[0]=(...a)=>e.startMove&&e.startMove(...a)),onTouchstart:r[1]||(r[1]=(...a)=>e.startMove&&e.startMove(...a))},null,34),tt(E("div",{class:"cropper-crop-box",style:yt({width:e.cropW+"px",height:e.cropH+"px",transform:"translate3d("+e.cropOffsertX+"px,"+e.cropOffsertY+"px,0)"})},[E("span",Jr,[E("img",{style:yt({width:e.trueWidth+"px",height:e.trueHeight+"px",transform:"scale("+e.scale+","+e.scale+") translate3d("+(e.x-e.cropOffsertX)/e.scale+"px,"+(e.y-e.cropOffsertY)/e.scale+"px,0)rotateZ("+90*e.rotate+"deg)"}),src:e.imgs,alt:"cropper-img"},null,12,Zr)]),E("span",{class:"cropper-face cropper-move",onMousedown:r[2]||(r[2]=(...a)=>e.cropMove&&e.cropMove(...a)),onTouchstart:r[3]||(r[3]=(...a)=>e.cropMove&&e.cropMove(...a))},null,32),e.info?(N(),D("span",{key:0,class:"crop-info",style:yt({top:e.cropInfo.top})},st(e.cropInfo.width)+" \xD7 "+st(e.cropInfo.height),5)):Ft("",!0),e.fixedBox?Ft("",!0):(N(),D("span",Kr,[E("span",{class:"crop-line line-w",onMousedown:r[4]||(r[4]=a=>e.changeCropSize(a,!1,!0,0,1)),onTouchstart:r[5]||(r[5]=a=>e.changeCropSize(a,!1,!0,0,1))},null,32),E("span",{class:"crop-line line-a",onMousedown:r[6]||(r[6]=a=>e.changeCropSize(a,!0,!1,1,0)),onTouchstart:r[7]||(r[7]=a=>e.changeCropSize(a,!0,!1,1,0))},null,32),E("span",{class:"crop-line line-s",onMousedown:r[8]||(r[8]=a=>e.changeCropSize(a,!1,!0,0,2)),onTouchstart:r[9]||(r[9]=a=>e.changeCropSize(a,!1,!0,0,2))},null,32),E("span",{class:"crop-line line-d",onMousedown:r[10]||(r[10]=a=>e.changeCropSize(a,!0,!1,2,0)),onTouchstart:r[11]||(r[11]=a=>e.changeCropSize(a,!0,!1,2,0))},null,32),E("span",{class:"crop-point point1",onMousedown:r[12]||(r[12]=a=>e.changeCropSize(a,!0,!0,1,1)),onTouchstart:r[13]||(r[13]=a=>e.changeCropSize(a,!0,!0,1,1))},null,32),E("span",{class:"crop-point point2",onMousedown:r[14]||(r[14]=a=>e.changeCropSize(a,!1,!0,0,1)),onTouchstart:r[15]||(r[15]=a=>e.changeCropSize(a,!1,!0,0,1))},null,32),E("span",{class:"crop-point point3",onMousedown:r[16]||(r[16]=a=>e.changeCropSize(a,!0,!0,2,1)),onTouchstart:r[17]||(r[17]=a=>e.changeCropSize(a,!0,!0,2,1))},null,32),E("span",{class:"crop-point point4",onMousedown:r[18]||(r[18]=a=>e.changeCropSize(a,!0,!1,1,0)),onTouchstart:r[19]||(r[19]=a=>e.changeCropSize(a,!0,!1,1,0))},null,32),E("span",{class:"crop-point point5",onMousedown:r[20]||(r[20]=a=>e.changeCropSize(a,!0,!1,2,0)),onTouchstart:r[21]||(r[21]=a=>e.changeCropSize(a,!0,!1,2,0))},null,32),E("span",{class:"crop-point point6",onMousedown:r[22]||(r[22]=a=>e.changeCropSize(a,!0,!0,1,2)),onTouchstart:r[23]||(r[23]=a=>e.changeCropSize(a,!0,!0,1,2))},null,32),E("span",{class:"crop-point point7",onMousedown:r[24]||(r[24]=a=>e.changeCropSize(a,!1,!0,0,2)),onTouchstart:r[25]||(r[25]=a=>e.changeCropSize(a,!1,!0,0,2))},null,32),E("span",{class:"crop-point point8",onMousedown:r[26]||(r[26]=a=>e.changeCropSize(a,!0,!0,2,2)),onTouchstart:r[27]||(r[27]=a=>e.changeCropSize(a,!0,!0,2,2))},null,32)]))],4),[[mt,e.cropping]])],544)},ht.__scopeId="data-v-48aab112";typeof window!="undefined"&&window.Vue&&window.Vue.createApp({}).component("VueCropper",ht);var Oe=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(r,t)};return function(r,t){e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),F;(function(e){e.InvalidFile="InvalidFile",e.InvalidToken="InvalidToken",e.InvalidMetadata="InvalidMetadata",e.InvalidChunkSize="InvalidChunkSize",e.InvalidCustomVars="InvalidCustomVars",e.NotAvailableUploadHost="NotAvailableUploadHost",e.ReadCacheFailed="ReadCacheFailed",e.InvalidCacheData="InvalidCacheData",e.WriteCacheFailed="WriteCacheFailed",e.RemoveCacheFailed="RemoveCacheFailed",e.GetCanvasContextFailed="GetCanvasContextFailed",e.UnsupportedFileType="UnsupportedFileType",e.FileReaderReadFailed="FileReaderReadFailed",e.NotAvailableXMLHttpRequest="NotAvailableXMLHttpRequest",e.InvalidProgressEventTarget="InvalidProgressEventTarget",e.RequestError="RequestError"})(F||(F={}));var Y=function(){function e(r,t){this.name=r,this.message=t,this.stack=new Error().stack}return e}(),ct=function(e){Oe(r,e);function r(t,n,o,i){var a=e.call(this,F.RequestError,o)||this;return a.code=t,a.reqId=n,a.isRequestError=!0,a.data=i,a}return r}(Y),Qr=function(e){Oe(r,e);function r(t,n){return n===void 0&&(n=""),e.call(this,0,n,t)||this}return r}(ct),tn=function(){function e(r,t){this.runTask=r,this.limit=t,this.queue=[],this.processing=[]}return e.prototype.enqueue=function(r){var t=this;return new Promise(function(n,o){t.queue.push({task:r,resolve:n,reject:o}),t.check()})},e.prototype.run=function(r){var t=this;this.queue=this.queue.filter(function(n){return n!==r}),this.processing.push(r),this.runTask(r.task).then(function(){t.processing=t.processing.filter(function(n){return n!==r}),r.resolve(),t.check()},function(n){return r.reject(n)})},e.prototype.check=function(){var r=this,t=this.processing.length,n=this.limit-t;this.queue.slice(0,n).forEach(function(o){r.run(o)})},e}(),en=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(r,t)};return function(r,t){e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),lt=globalThis&&globalThis.__assign||function(){return lt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},lt.apply(this,arguments)},rn=function(){function e(){this.closed=!1}return e.prototype.unsubscribe=function(){this.closed||(this.closed=!0,this._unsubscribe&&this._unsubscribe())},e.prototype.add=function(r){this._unsubscribe=r},e}(),nn=function(e){en(r,e);function r(t,n,o){var i=e.call(this)||this;return i.isStopped=!1,t&&typeof t=="object"?i.destination=t:i.destination=lt(lt(lt({},t&&{next:t}),n&&{error:n}),o&&{complete:o}),i}return r.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},r.prototype.next=function(t){!this.isStopped&&this.destination.next&&this.destination.next(t)},r.prototype.error=function(t){!this.isStopped&&this.destination.error&&(this.isStopped=!0,this.destination.error(t))},r.prototype.complete=function(t){!this.isStopped&&this.destination.complete&&(this.isStopped=!0,this.destination.complete(t))},r}(rn),on=function(){function e(r){this._subscribe=r}return e.prototype.subscribe=function(r,t,n){var o=new nn(r,t,n);return o.add(this._subscribe(o)),o},e}();function sn(e){if(e===null||typeof e=="undefined")return"";var r=e+"",t="",n,o,i=0;n=o=0,i=r.length;for(var a=0;a<i;a++){var u=r.charCodeAt(a),l=null;if(u<128)o++;else if(u>127&&u<2048)l=String.fromCharCode(u>>6|192,u&63|128);else if((u&63488^55296)>0)l=String.fromCharCode(u>>12|224,u>>6&63|128,u&63|128);else{if((u&64512^55296)>0)throw new RangeError("Unmatched trail surrogate at "+a);var s=r.charCodeAt(++a);if((s&64512^56320)>0)throw new RangeError("Unmatched lead surrogate at "+(a-1));u=((u&1023)<<10)+(s&1023)+65536,l=String.fromCharCode(u>>18|240,u>>12&63|128,u>>6&63|128,u&63|128)}l!==null&&(o>n&&(t+=r.slice(n,o)),t+=l,n=o=a+1)}return o>n&&(t+=r.slice(n,i)),t}function an(e){var r=[],t=0,n=0,o=0;for(e+="";t<e.length;){n=e.charCodeAt(t)&255,o=0,n<=191?(n=n&127,o=1):n<=223?(n=n&31,o=2):n<=239?(n=n&15,o=3):(n=n&7,o=4);for(var i=1;i<o;++i)n=n<<6|e.charCodeAt(i+t)&63;o===4?(n-=65536,r.push(String.fromCharCode(55296|n>>10&1023)),r.push(String.fromCharCode(56320|n&1023))):r.push(String.fromCharCode(n)),t+=o}return r.join("")}function un(e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t,n,o,i,a,u,l,s,f=0,m=0,y="",w=[];if(!e)return e;e=sn(e+"");do t=e.charCodeAt(f++),n=e.charCodeAt(f++),o=e.charCodeAt(f++),s=t<<16|n<<8|o,i=s>>18&63,a=s>>12&63,u=s>>6&63,l=s&63,w[m++]=r.charAt(i)+r.charAt(a)+r.charAt(u)+r.charAt(l);while(f<e.length);switch(y=w.join(""),e.length%3){case 1:y=y.slice(0,-2)+"==";break;case 2:y=y.slice(0,-1)+"=";break}return y}function hn(e){var r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",t,n,o,i,a,u,l,s,f=0,m=0,y="",w=[];if(!e)return e;e+="";do i=r.indexOf(e.charAt(f++)),a=r.indexOf(e.charAt(f++)),u=r.indexOf(e.charAt(f++)),l=r.indexOf(e.charAt(f++)),s=i<<18|a<<12|u<<6|l,t=s>>16&255,n=s>>8&255,o=s&255,u===64?w[m++]=String.fromCharCode(t):l===64?w[m++]=String.fromCharCode(t,n):w[m++]=String.fromCharCode(t,n,o);while(f<e.length);return y=w.join(""),an(y)}function Me(e){return e=un(e),e.replace(/\//g,"_").replace(/\+/g,"-")}function cn(e){return e=e.replace(/_/g,"/").replace(/-/g,"+"),hn(e)}var Ae={exports:{}};(function(e,r){(function(t){e.exports=t()})(function(t){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function o(v,g){var c=v[0],h=v[1],p=v[2],d=v[3];c+=(h&p|~h&d)+g[0]-680876936|0,c=(c<<7|c>>>25)+h|0,d+=(c&h|~c&p)+g[1]-389564586|0,d=(d<<12|d>>>20)+c|0,p+=(d&c|~d&h)+g[2]+606105819|0,p=(p<<17|p>>>15)+d|0,h+=(p&d|~p&c)+g[3]-1044525330|0,h=(h<<22|h>>>10)+p|0,c+=(h&p|~h&d)+g[4]-176418897|0,c=(c<<7|c>>>25)+h|0,d+=(c&h|~c&p)+g[5]+1200080426|0,d=(d<<12|d>>>20)+c|0,p+=(d&c|~d&h)+g[6]-1473231341|0,p=(p<<17|p>>>15)+d|0,h+=(p&d|~p&c)+g[7]-45705983|0,h=(h<<22|h>>>10)+p|0,c+=(h&p|~h&d)+g[8]+1770035416|0,c=(c<<7|c>>>25)+h|0,d+=(c&h|~c&p)+g[9]-1958414417|0,d=(d<<12|d>>>20)+c|0,p+=(d&c|~d&h)+g[10]-42063|0,p=(p<<17|p>>>15)+d|0,h+=(p&d|~p&c)+g[11]-1990404162|0,h=(h<<22|h>>>10)+p|0,c+=(h&p|~h&d)+g[12]+1804603682|0,c=(c<<7|c>>>25)+h|0,d+=(c&h|~c&p)+g[13]-40341101|0,d=(d<<12|d>>>20)+c|0,p+=(d&c|~d&h)+g[14]-1502002290|0,p=(p<<17|p>>>15)+d|0,h+=(p&d|~p&c)+g[15]+1236535329|0,h=(h<<22|h>>>10)+p|0,c+=(h&d|p&~d)+g[1]-165796510|0,c=(c<<5|c>>>27)+h|0,d+=(c&p|h&~p)+g[6]-1069501632|0,d=(d<<9|d>>>23)+c|0,p+=(d&h|c&~h)+g[11]+643717713|0,p=(p<<14|p>>>18)+d|0,h+=(p&c|d&~c)+g[0]-373897302|0,h=(h<<20|h>>>12)+p|0,c+=(h&d|p&~d)+g[5]-701558691|0,c=(c<<5|c>>>27)+h|0,d+=(c&p|h&~p)+g[10]+38016083|0,d=(d<<9|d>>>23)+c|0,p+=(d&h|c&~h)+g[15]-660478335|0,p=(p<<14|p>>>18)+d|0,h+=(p&c|d&~c)+g[4]-405537848|0,h=(h<<20|h>>>12)+p|0,c+=(h&d|p&~d)+g[9]+568446438|0,c=(c<<5|c>>>27)+h|0,d+=(c&p|h&~p)+g[14]-1019803690|0,d=(d<<9|d>>>23)+c|0,p+=(d&h|c&~h)+g[3]-187363961|0,p=(p<<14|p>>>18)+d|0,h+=(p&c|d&~c)+g[8]+1163531501|0,h=(h<<20|h>>>12)+p|0,c+=(h&d|p&~d)+g[13]-1444681467|0,c=(c<<5|c>>>27)+h|0,d+=(c&p|h&~p)+g[2]-51403784|0,d=(d<<9|d>>>23)+c|0,p+=(d&h|c&~h)+g[7]+1735328473|0,p=(p<<14|p>>>18)+d|0,h+=(p&c|d&~c)+g[12]-1926607734|0,h=(h<<20|h>>>12)+p|0,c+=(h^p^d)+g[5]-378558|0,c=(c<<4|c>>>28)+h|0,d+=(c^h^p)+g[8]-2022574463|0,d=(d<<11|d>>>21)+c|0,p+=(d^c^h)+g[11]+1839030562|0,p=(p<<16|p>>>16)+d|0,h+=(p^d^c)+g[14]-35309556|0,h=(h<<23|h>>>9)+p|0,c+=(h^p^d)+g[1]-1530992060|0,c=(c<<4|c>>>28)+h|0,d+=(c^h^p)+g[4]+1272893353|0,d=(d<<11|d>>>21)+c|0,p+=(d^c^h)+g[7]-155497632|0,p=(p<<16|p>>>16)+d|0,h+=(p^d^c)+g[10]-1094730640|0,h=(h<<23|h>>>9)+p|0,c+=(h^p^d)+g[13]+681279174|0,c=(c<<4|c>>>28)+h|0,d+=(c^h^p)+g[0]-358537222|0,d=(d<<11|d>>>21)+c|0,p+=(d^c^h)+g[3]-722521979|0,p=(p<<16|p>>>16)+d|0,h+=(p^d^c)+g[6]+76029189|0,h=(h<<23|h>>>9)+p|0,c+=(h^p^d)+g[9]-640364487|0,c=(c<<4|c>>>28)+h|0,d+=(c^h^p)+g[12]-421815835|0,d=(d<<11|d>>>21)+c|0,p+=(d^c^h)+g[15]+530742520|0,p=(p<<16|p>>>16)+d|0,h+=(p^d^c)+g[2]-995338651|0,h=(h<<23|h>>>9)+p|0,c+=(p^(h|~d))+g[0]-198630844|0,c=(c<<6|c>>>26)+h|0,d+=(h^(c|~p))+g[7]+1126891415|0,d=(d<<10|d>>>22)+c|0,p+=(c^(d|~h))+g[14]-1416354905|0,p=(p<<15|p>>>17)+d|0,h+=(d^(p|~c))+g[5]-57434055|0,h=(h<<21|h>>>11)+p|0,c+=(p^(h|~d))+g[12]+1700485571|0,c=(c<<6|c>>>26)+h|0,d+=(h^(c|~p))+g[3]-1894986606|0,d=(d<<10|d>>>22)+c|0,p+=(c^(d|~h))+g[10]-1051523|0,p=(p<<15|p>>>17)+d|0,h+=(d^(p|~c))+g[1]-2054922799|0,h=(h<<21|h>>>11)+p|0,c+=(p^(h|~d))+g[8]+1873313359|0,c=(c<<6|c>>>26)+h|0,d+=(h^(c|~p))+g[15]-30611744|0,d=(d<<10|d>>>22)+c|0,p+=(c^(d|~h))+g[6]-1560198380|0,p=(p<<15|p>>>17)+d|0,h+=(d^(p|~c))+g[13]+1309151649|0,h=(h<<21|h>>>11)+p|0,c+=(p^(h|~d))+g[4]-145523070|0,c=(c<<6|c>>>26)+h|0,d+=(h^(c|~p))+g[11]-1120210379|0,d=(d<<10|d>>>22)+c|0,p+=(c^(d|~h))+g[2]+718787259|0,p=(p<<15|p>>>17)+d|0,h+=(d^(p|~c))+g[9]-343485551|0,h=(h<<21|h>>>11)+p|0,v[0]=c+v[0]|0,v[1]=h+v[1]|0,v[2]=p+v[2]|0,v[3]=d+v[3]|0}function i(v){var g=[],c;for(c=0;c<64;c+=4)g[c>>2]=v.charCodeAt(c)+(v.charCodeAt(c+1)<<8)+(v.charCodeAt(c+2)<<16)+(v.charCodeAt(c+3)<<24);return g}function a(v){var g=[],c;for(c=0;c<64;c+=4)g[c>>2]=v[c]+(v[c+1]<<8)+(v[c+2]<<16)+(v[c+3]<<24);return g}function u(v){var g=v.length,c=[1732584193,-271733879,-1732584194,271733878],h,p,d,H,R,$;for(h=64;h<=g;h+=64)o(c,i(v.substring(h-64,h)));for(v=v.substring(h-64),p=v.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<p;h+=1)d[h>>2]|=v.charCodeAt(h)<<(h%4<<3);if(d[h>>2]|=128<<(h%4<<3),h>55)for(o(c,d),h=0;h<16;h+=1)d[h]=0;return H=g*8,H=H.toString(16).match(/(.*?)(.{0,8})$/),R=parseInt(H[2],16),$=parseInt(H[1],16)||0,d[14]=R,d[15]=$,o(c,d),c}function l(v){var g=v.length,c=[1732584193,-271733879,-1732584194,271733878],h,p,d,H,R,$;for(h=64;h<=g;h+=64)o(c,a(v.subarray(h-64,h)));for(v=h-64<g?v.subarray(h-64):new Uint8Array(0),p=v.length,d=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],h=0;h<p;h+=1)d[h>>2]|=v[h]<<(h%4<<3);if(d[h>>2]|=128<<(h%4<<3),h>55)for(o(c,d),h=0;h<16;h+=1)d[h]=0;return H=g*8,H=H.toString(16).match(/(.*?)(.{0,8})$/),R=parseInt(H[2],16),$=parseInt(H[1],16)||0,d[14]=R,d[15]=$,o(c,d),c}function s(v){var g="",c;for(c=0;c<4;c+=1)g+=n[v>>c*8+4&15]+n[v>>c*8&15];return g}function f(v){var g;for(g=0;g<v.length;g+=1)v[g]=s(v[g]);return v.join("")}f(u("hello"))!=="5d41402abc4b2a76b9719d911017c592",typeof ArrayBuffer!="undefined"&&!ArrayBuffer.prototype.slice&&function(){function v(g,c){return g=g|0||0,g<0?Math.max(g+c,0):Math.min(g,c)}ArrayBuffer.prototype.slice=function(g,c){var h=this.byteLength,p=v(g,h),d=h,H,R,$,L;return c!==t&&(d=v(c,h)),p>d?new ArrayBuffer(0):(H=d-p,R=new ArrayBuffer(H),$=new Uint8Array(R),L=new Uint8Array(this,p,H),$.set(L),R)}}();function m(v){return/[\u0080-\uFFFF]/.test(v)&&(v=unescape(encodeURIComponent(v))),v}function y(v,g){var c=v.length,h=new ArrayBuffer(c),p=new Uint8Array(h),d;for(d=0;d<c;d+=1)p[d]=v.charCodeAt(d);return g?p:h}function w(v){return String.fromCharCode.apply(null,new Uint8Array(v))}function x(v,g,c){var h=new Uint8Array(v.byteLength+g.byteLength);return h.set(new Uint8Array(v)),h.set(new Uint8Array(g),v.byteLength),c?h:h.buffer}function _(v){var g=[],c=v.length,h;for(h=0;h<c-1;h+=2)g.push(parseInt(v.substr(h,2),16));return String.fromCharCode.apply(String,g)}function b(){this.reset()}return b.prototype.append=function(v){return this.appendBinary(m(v)),this},b.prototype.appendBinary=function(v){this._buff+=v,this._length+=v.length;var g=this._buff.length,c;for(c=64;c<=g;c+=64)o(this._hash,i(this._buff.substring(c-64,c)));return this._buff=this._buff.substring(c-64),this},b.prototype.end=function(v){var g=this._buff,c=g.length,h,p=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],d;for(h=0;h<c;h+=1)p[h>>2]|=g.charCodeAt(h)<<(h%4<<3);return this._finish(p,c),d=f(this._hash),v&&(d=_(d)),this.reset(),d},b.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},b.prototype.setState=function(v){return this._buff=v.buff,this._length=v.length,this._hash=v.hash,this},b.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},b.prototype._finish=function(v,g){var c=g,h,p,d;if(v[c>>2]|=128<<(c%4<<3),c>55)for(o(this._hash,v),c=0;c<16;c+=1)v[c]=0;h=this._length*8,h=h.toString(16).match(/(.*?)(.{0,8})$/),p=parseInt(h[2],16),d=parseInt(h[1],16)||0,v[14]=p,v[15]=d,o(this._hash,v)},b.hash=function(v,g){return b.hashBinary(m(v),g)},b.hashBinary=function(v,g){var c=u(v),h=f(c);return g?_(h):h},b.ArrayBuffer=function(){this.reset()},b.ArrayBuffer.prototype.append=function(v){var g=x(this._buff.buffer,v,!0),c=g.length,h;for(this._length+=v.byteLength,h=64;h<=c;h+=64)o(this._hash,a(g.subarray(h-64,h)));return this._buff=h-64<c?new Uint8Array(g.buffer.slice(h-64)):new Uint8Array(0),this},b.ArrayBuffer.prototype.end=function(v){var g=this._buff,c=g.length,h=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],p,d;for(p=0;p<c;p+=1)h[p>>2]|=g[p]<<(p%4<<3);return this._finish(h,c),d=f(this._hash),v&&(d=_(d)),this.reset(),d},b.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},b.ArrayBuffer.prototype.getState=function(){var v=b.prototype.getState.call(this);return v.buff=w(v.buff),v},b.ArrayBuffer.prototype.setState=function(v){return v.buff=y(v.buff,!0),b.prototype.setState.call(this,v)},b.ArrayBuffer.prototype.destroy=b.prototype.destroy,b.ArrayBuffer.prototype._finish=b.prototype._finish,b.ArrayBuffer.hash=function(v,g){var c=l(new Uint8Array(v)),h=f(c);return g?_(h):h},b})})(Ae);var ln=Ae.exports,kt=globalThis&&globalThis.__assign||function(){return kt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},kt.apply(this,arguments)},fn=globalThis&&globalThis.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(f){try{s(n.next(f))}catch(m){a(m)}}function l(f){try{s(n.throw(f))}catch(m){a(m)}}function s(f){f.done?i(f.value):o(f.value).then(u,l)}s((n=n.apply(e,r||[])).next())})},pn=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(f){return l([s,f])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(f){s=[6,f],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},rt=Math.pow(1024,2);function dn(e,r){var t=r*rt;if(t>e.size)t=e.size;else for(;e.size>t*1e4;)t*=2;for(var n=[],o=Math.ceil(e.size/t),i=0;i<o;i++){var a=e.slice(t*i,i===o-1?e.size:t*(i+1));n.push(a)}return n}function gn(e){return Object.keys(e).every(function(r){return r.indexOf("x-qn-meta-")===0})}function vn(e){return Object.keys(e).every(function(r){return r.indexOf("x:")===0})}function mn(e){return e.reduce(function(r,t){return r+t},0)}function yn(e,r,t){try{localStorage.setItem(e,JSON.stringify(r))}catch{t.warn(new Y(F.WriteCacheFailed,"setLocalFileInfo failed: "+e))}}function bn(e,r,t){var n=r==null?"_":"_key_"+r+"_";return"qiniu_js_sdk_upload_file_name_"+e+n+"size_"+t}function Wt(e,r){try{localStorage.removeItem(e)}catch{r.warn(new Y(F.RemoveCacheFailed,"removeLocalFileInfo failed. key: "+e))}}function wn(e,r){var t=null;try{t=localStorage.getItem(e)}catch{r.warn(new Y(F.ReadCacheFailed,"getLocalFileInfo failed. key: "+e))}if(t==null)return null;var n=null;try{n=JSON.parse(t)}catch{Wt(e,r),r.warn(new Y(F.InvalidCacheData,"getLocalFileInfo failed to parse. key: "+e))}return n}function Tt(e){var r="UpToken "+e;return{Authorization:r}}function xn(e){var r=Tt(e);return kt({"content-type":"application/octet-stream"},r)}function _n(e){var r=Tt(e);return kt({"content-type":"application/json"},r)}function Ie(){if(window.XMLHttpRequest)return new XMLHttpRequest;if(window.ActiveXObject)return new window.ActiveXObject("Microsoft.XMLHTTP");throw new Y(F.NotAvailableXMLHttpRequest,"the current environment does not support.")}function Cn(e){return fn(this,void 0,void 0,function(){var r,t;return pn(this,function(n){switch(n.label){case 0:return[4,Sn(e)];case 1:return r=n.sent(),t=new ln.ArrayBuffer,t.append(r),[2,t.end()]}})})}function Sn(e){return new Promise(function(r,t){var n=new FileReader;n.onload=function(o){if(o.target){var i=o.target.result;r(i)}else t(new Y(F.InvalidProgressEventTarget,"progress event target is undefined"))},n.onerror=function(){t(new Y(F.FileReaderReadFailed,"fileReader read failed"))},n.readAsArrayBuffer(e)})}function ft(e,r){return new Promise(function(t,n){var o=Ie();if(o.open(r.method,e),r.onCreate&&r.onCreate(o),r.headers){var i=r.headers;Object.keys(i).forEach(function(a){o.setRequestHeader(a,i[a])})}o.upload.addEventListener("progress",function(a){a.lengthComputable&&r.onProgress&&r.onProgress({loaded:a.loaded,total:a.total})}),o.onreadystatechange=function(){var a=o.responseText;if(o.readyState===4){var u=o.getResponseHeader("x-reqId")||"";if(o.status===0){n(new Qr("network error.",u));return}if(o.status!==200){var l="xhr request failed, code: "+o.status;a&&(l+=" response: "+a);var s=void 0;try{s=JSON.parse(a)}catch{}n(new ct(o.status,u,l,s));return}try{t({data:JSON.parse(a),reqId:u})}catch(f){n(f)}}},o.send(r.body)})}function kn(e){if(e&&e.match){var r=e.match(/(^https?)/);if(!r)return"";var t=r[1];return r=e.match(/^https?:\/\/([^:^/]*):(\d*)/),r?r[2]:t==="http"?"80":"443"}return""}function Tn(e){if(e&&e.match){var r=e.match(/^https?:\/\/([^:^/]*)/);return r?r[1]:""}return""}function Dt(e){if(!e)throw new Y(F.InvalidToken,"invalid token.");var r=e.split(":");if(r.length===1)throw new Y(F.InvalidToken,"invalid token segments.");var t=r.length>3?r[1]:r[0];if(!t)throw new Y(F.InvalidToken,"missing assess key field.");var n=null;try{n=JSON.parse(cn(r[r.length-1]))}catch{throw new Y(F.InvalidToken,"token parse failed.")}if(n==null)throw new Y(F.InvalidToken,"putPolicy is null.");if(n.scope==null)throw new Y(F.InvalidToken,"scope field is null.");var o=n.scope.split(":")[0];if(!o)throw new Y(F.InvalidToken,"resolve bucketName failed.");return{assessKey:t,bucketName:o,scope:n.scope}}var G,Z={z0:"z0",z1:"z1",z2:"z2",na0:"na0",as0:"as0",cnEast2:"cn-east-2"},On=(G={},G[Z.z0]={srcUphost:["up.qiniup.com"],cdnUphost:["upload.qiniup.com"]},G[Z.z1]={srcUphost:["up-z1.qiniup.com"],cdnUphost:["upload-z1.qiniup.com"]},G[Z.z2]={srcUphost:["up-z2.qiniup.com"],cdnUphost:["upload-z2.qiniup.com"]},G[Z.na0]={srcUphost:["up-na0.qiniup.com"],cdnUphost:["upload-na0.qiniup.com"]},G[Z.as0]={srcUphost:["up-as0.qiniup.com"],cdnUphost:["upload-as0.qiniup.com"]},G[Z.cnEast2]={srcUphost:["up-cn-east-2.qiniup.com"],cdnUphost:["upload-cn-east-2.qiniup.com"]},G),pt=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},Mn=function(e,r,t,n){return r=r||"&",t=t||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(o){var i=encodeURIComponent(pt(o))+t;return Array.isArray(e[o])?e[o].map(function(a){return i+encodeURIComponent(pt(a))}).join(r):i+encodeURIComponent(pt(e[o]))}).filter(Boolean).join(r):n?encodeURIComponent(pt(n))+t+encodeURIComponent(pt(e)):""},Ee;Ee=Mn;var K=globalThis&&globalThis.__assign||function(){return K=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},K.apply(this,arguments)},An=globalThis&&globalThis.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(f){try{s(n.next(f))}catch(m){a(m)}}function l(f){try{s(n.throw(f))}catch(m){a(m)}}function s(f){f.done?i(f.value):o(f.value).then(u,l)}s((n=n.apply(e,r||[])).next())})},In=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(f){return l([s,f])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(f){s=[6,f],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function En(e,r,t){return An(this,void 0,void 0,function(){var n,o;return In(this,function(i){return n=Ee({ak:e,bucket:r}),o=t+"://api.qiniu.com/v2/query?"+n,[2,ft(o,{method:"GET"})]})})}function He(e,r,t){var n=t.url,o=t.id;return n+"/buckets/"+e+"/objects/"+(r!=null?Me(r):"~")+"/uploads/"+o}function Hn(e,r,t,n){var o=n+"/buckets/"+r+"/objects/"+(t!=null?Me(t):"~")+"/uploads";return ft(o,{method:"POST",headers:Tt(e)})}function Ln(e,r,t,n,o){var i=Dt(e).bucketName,a=He(i,r,n)+("/"+t),u=xn(e);return o.md5&&(u["Content-MD5"]=o.md5),ft(a,K(K({},o),{method:"PUT",headers:u}))}function Pn(e,r,t,n){var o=Dt(e).bucketName,i=He(o,r,t);return ft(i,K(K({},n),{method:"POST",headers:_n(e)}))}function Fn(e,r,t){return ft(e,K({method:"POST",body:r},t))}var Ot=globalThis&&globalThis.__assign||function(){return Ot=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},Ot.apply(this,arguments)},Le=globalThis&&globalThis.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(f){try{s(n.next(f))}catch(m){a(m)}}function l(f){try{s(n.throw(f))}catch(m){a(m)}}function s(f){f.done?i(f.value):o(f.value).then(u,l)}s((n=n.apply(e,r||[])).next())})},Pe=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(f){return l([s,f])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(f){s=[6,f],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Yn=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Rn=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Yn(arguments[r]));return e},zn=4,Fe=[0,502,503,504,599],Un=Rn(Fe,[612]),$n=Math.pow(1024,3),Ye=function(){function e(r,t,n,o){this.hostPool=n,this.logger=o,this.aborted=!1,this.retryCount=0,this.xhrList=[],this.config=r.config,o.info("config inited.",this.config),this.putExtra=Ot({fname:""},r.putExtra),o.info("putExtra inited.",this.putExtra),this.key=r.key,this.file=r.file,this.token=r.token,this.onData=t.onData,this.onError=t.onError,this.onComplete=t.onComplete;try{var i=Dt(this.token);this.bucketName=i.bucketName,this.assessKey=i.assessKey}catch(a){o.error("get putPolicy from token failed.",a),this.onError(a)}}return e.prototype.checkAndUpdateUploadHost=function(){return Le(this,void 0,void 0,function(){var r;return Pe(this,function(t){switch(t.label){case 0:return this.logger.info("get available upload host."),[4,this.hostPool.getUp(this.assessKey,this.bucketName,this.config.upprotocol)];case 1:if(r=t.sent(),r==null)throw new Y(F.NotAvailableUploadHost,"no available upload host.");return this.uploadHost!=null&&this.uploadHost.host!==r.host?this.logger.warn("host switches from "+this.uploadHost.host+" to "+r.host+"."):this.logger.info("use host "+r.host+"."),this.uploadHost=r,[2]}})})},e.prototype.checkAndUnfreezeHost=function(){this.logger.info("check unfreeze host."),this.uploadHost!=null&&this.uploadHost.isFrozen()&&(this.logger.warn(this.uploadHost.host+" will be unfrozen."),this.uploadHost.unfreeze())},e.prototype.checkAndFreezeHost=function(r){this.logger.info("check freeze host."),r instanceof ct&&this.uploadHost!=null&&Fe.includes(r.code)&&(this.logger.warn(this.uploadHost.host+" will be temporarily frozen."),this.uploadHost.freeze())},e.prototype.handleError=function(r){this.logger.error(r.message),this.onError(r)},e.prototype.putFile=function(){return Le(this,void 0,void 0,function(){var r,t,n,o,i,a;return Pe(this,function(u){switch(u.label){case 0:if(this.aborted=!1,this.putExtra.fname||(this.logger.info("use file.name as fname."),this.putExtra.fname=this.file.name),this.file.size>1e4*$n)return this.handleError(new Y(F.InvalidFile,"file size exceed maximum value 10000G")),[2];if(this.putExtra.customVars&&!vn(this.putExtra.customVars))return this.handleError(new Y(F.InvalidCustomVars,"customVars key should start width x:")),[2];if(this.putExtra.metadata&&!gn(this.putExtra.metadata))return this.handleError(new Y(F.InvalidMetadata,"metadata key should start with x-qn-meta-")),[2];u.label=1;case 1:return u.trys.push([1,4,,5]),this.uploadAt=new Date().getTime(),[4,this.checkAndUpdateUploadHost()];case 2:return u.sent(),[4,this.run()];case 3:return r=u.sent(),this.onComplete(r.data),this.checkAndUnfreezeHost(),this.sendLog(r.reqId,200),[2];case 4:return t=u.sent(),this.logger.error(t),this.clear(),t instanceof ct&&(n=this.aborted?"":t.reqId,o=this.aborted?-2:t.code,this.sendLog(n,o),this.checkAndFreezeHost(t),i=++this.retryCount<=this.config.retryCount,a=!this.aborted&&Un.includes(t.code),a&&i)?(this.logger.warn("error auto retry: "+this.retryCount+"/"+this.config.retryCount+"."),this.putFile(),[2]):(this.onError(t),[3,5]);case 5:return[2]}})})},e.prototype.clear=function(){this.logger.info("start cleaning all xhr."),this.xhrList.forEach(function(r){r.onreadystatechange=null,r.abort()}),this.logger.info("cleanup completed."),this.xhrList=[]},e.prototype.stop=function(){this.logger.info("stop."),this.clear(),this.aborted=!0},e.prototype.addXhr=function(r){this.xhrList.push(r)},e.prototype.sendLog=function(r,t){var n,o;this.logger.report({code:t,reqId:r,remoteIp:"",upType:"jssdk-h5",size:this.file.size,time:Math.floor(this.uploadAt/1e3),port:kn((n=this.uploadHost)===null||n===void 0?void 0:n.getUrl()),host:Tn((o=this.uploadHost)===null||o===void 0?void 0:o.getUrl()),bytesSent:this.progress?this.progress.total.loaded:0,duration:Math.floor((new Date().getTime()-this.uploadAt)/1e3)})},e.prototype.getProgressInfoItem=function(r,t,n){return Ot({size:t,loaded:r,percent:r/t*100},n==null?{}:{fromCache:n})},e}(),Bn=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(r,t)};return function(r,t){e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),dt=globalThis&&globalThis.__assign||function(){return dt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},dt.apply(this,arguments)},Mt=globalThis&&globalThis.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(f){try{s(n.next(f))}catch(m){a(m)}}function l(f){try{s(n.throw(f))}catch(m){a(m)}}function s(f){f.done?i(f.value):o(f.value).then(u,l)}s((n=n.apply(e,r||[])).next())})},At=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(f){return l([s,f])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(f){s=[6,f],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}};function Xn(e){var r=/^[1-9]\d*$/;return r.test(String(e))}var jn=function(e){Bn(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.run=function(){return Mt(this,void 0,void 0,function(){var t,n,o,i,a,u=this;return At(this,function(l){switch(l.label){case 0:if(this.logger.info("start run Resume."),!this.config.chunkSize||!Xn(this.config.chunkSize))throw new Y(F.InvalidChunkSize,"chunkSize must be a positive integer");if(this.config.chunkSize>1024)throw new Y(F.InvalidChunkSize,"chunkSize maximum value is 1024");return[4,this.initBeforeUploadChunks()];case 1:l.sent(),t=new tn(function(s){return u.uploadChunk(s)},this.config.concurrentRequestLimit),n=null,o=this.getLocalKey(),i=this.chunks.map(function(s,f){return t.enqueue({chunk:s,index:f})}),l.label=2;case 2:return l.trys.push([2,5,,6]),[4,Promise.all(i)];case 3:return l.sent(),[4,this.mkFileReq()];case 4:return n=l.sent(),[3,6];case 5:throw a=l.sent(),a instanceof ct&&(a.code===612||a.code===400)&&Wt(o,this.logger),a;case 6:return Wt(o,this.logger),[2,n]}})})},r.prototype.uploadChunk=function(t){return Mt(this,void 0,void 0,function(){var n,o,i,a,u,l,s,f,m,y=this;return At(this,function(w){switch(w.label){case 0:return n=t.index,o=t.chunk,i=this.cachedUploadedList[n],this.logger.info("upload part "+n+", cache:",i),a=this.config.checkByMD5,u=function(){y.usedCacheList[n]=!0,y.updateChunkProgress(o.size,n),y.uploadedList[n]=i,y.updateLocalCache()},i&&!a?(u(),[2]):[4,Cn(o)];case 1:return l=w.sent(),this.logger.info("computed part md5.",l),i&&l===i.md5?(u(),[2]):(this.usedCacheList[n]=!1,s=function(x){y.updateChunkProgress(x.loaded,n)},f={body:o,md5:this.config.checkByServer?l:void 0,onProgress:s,onCreate:function(x){return y.addXhr(x)}},this.logger.info("part "+n+" start uploading."),[4,Ln(this.token,this.key,t.index+1,this.getUploadInfo(),f)]);case 2:return m=w.sent(),this.logger.info("part "+n+" upload completed."),s({loaded:o.size,total:o.size}),this.uploadedList[n]={etag:m.data.etag,md5:m.data.md5,size:o.size},this.updateLocalCache(),[2]}})})},r.prototype.mkFileReq=function(){return Mt(this,void 0,void 0,function(){var t,n,o=this;return At(this,function(i){switch(i.label){case 0:return t=dt(dt(dt({parts:this.uploadedList.map(function(a,u){return{etag:a.etag,partNumber:u+1}}),fname:this.putExtra.fname},this.putExtra.mimeType&&{mimeType:this.putExtra.mimeType}),this.putExtra.customVars&&{customVars:this.putExtra.customVars}),this.putExtra.metadata&&{metadata:this.putExtra.metadata}),this.logger.info("parts upload completed, make file.",t),[4,Pn(this.token,this.key,this.getUploadInfo(),{onCreate:function(a){return o.addXhr(a)},body:JSON.stringify(t)})];case 1:return n=i.sent(),this.logger.info("finish Resume Progress."),this.updateMkFileProgress(1),[2,n]}})})},r.prototype.initBeforeUploadChunks=function(){return Mt(this,void 0,void 0,function(){var t,n,o;return At(this,function(i){switch(i.label){case 0:return this.uploadedList=[],this.usedCacheList=[],t=wn(this.getLocalKey(),this.logger),t?[3,2]:(this.logger.info("init upload parts from api."),[4,Hn(this.token,this.bucketName,this.key,this.uploadHost.getUrl())]);case 1:return n=i.sent(),this.logger.info("initd upload parts of id: "+n.data.uploadId+"."),this.uploadId=n.data.uploadId,this.cachedUploadedList=[],[3,3];case 2:o=["resume upload parts from local cache,","total "+t.data.length+" part,","id is "+t.id+"."],this.logger.info(o.join(" ")),this.cachedUploadedList=t.data,this.uploadId=t.id,i.label=3;case 3:return this.chunks=dn(this.file,this.config.chunkSize),this.loaded={mkFileProgress:0,chunks:this.chunks.map(function(a){return 0})},this.notifyResumeProgress(),[2]}})})},r.prototype.getUploadInfo=function(){return{id:this.uploadId,url:this.uploadHost.getUrl()}},r.prototype.getLocalKey=function(){return bn(this.file.name,this.key,this.file.size)},r.prototype.updateLocalCache=function(){yn(this.getLocalKey(),{id:this.uploadId,data:this.uploadedList},this.logger)},r.prototype.updateChunkProgress=function(t,n){this.loaded.chunks[n]=t,this.notifyResumeProgress()},r.prototype.updateMkFileProgress=function(t){this.loaded.mkFileProgress=t,this.notifyResumeProgress()},r.prototype.notifyResumeProgress=function(){var t=this;this.progress={total:this.getProgressInfoItem(mn(this.loaded.chunks)+this.loaded.mkFileProgress,this.file.size+1),chunks:this.chunks.map(function(n,o){var i=t.usedCacheList[o];return t.getProgressInfoItem(t.loaded.chunks[o],n.size,i)}),uploadInfo:{id:this.uploadId,url:this.uploadHost.getUrl()}},this.onData(this.progress)},r}(Ye),Re=globalThis&&globalThis.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(f){try{s(n.next(f))}catch(m){a(m)}}function l(f){try{s(n.throw(f))}catch(m){a(m)}}function s(f){f.done?i(f.value):o(f.value).then(u,l)}s((n=n.apply(e,r||[])).next())})},ze=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(f){return l([s,f])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(f){s=[6,f],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Nn=function(){function e(){this.crc=-1,this.table=this.makeTable()}return e.prototype.makeTable=function(){for(var r=new Array,t=0;t<256;t++){for(var n=t,o=0;o<8;o++)n&1?n=n>>>1^3988292384:n>>>=1;r[t]=n}return r},e.prototype.append=function(r){for(var t=this.crc,n=0;n<r.byteLength;n++)t=t>>>8^this.table[(t^r[n])&255];this.crc=t},e.prototype.compute=function(){return(this.crc^-1)>>>0},e.prototype.readAsUint8Array=function(r){return Re(this,void 0,void 0,function(){var t;return ze(this,function(n){switch(n.label){case 0:return typeof r.arrayBuffer!="function"?[3,2]:(t=Uint8Array.bind,[4,r.arrayBuffer()]);case 1:return[2,new(t.apply(Uint8Array,[void 0,n.sent()]))];case 2:return[2,new Promise(function(o,i){var a=new FileReader;a.onload=function(){if(a.result==null){i();return}if(typeof a.result=="string"){i();return}o(new Uint8Array(a.result))},a.readAsArrayBuffer(r)})]}})})},e.prototype.file=function(r){return Re(this,void 0,void 0,function(){var t,n,o,i,a,u;return ze(this,function(l){switch(l.label){case 0:return r.size<=rt?(t=this.append,[4,this.readAsUint8Array(r)]):[3,2];case 1:return t.apply(this,[l.sent()]),[2,this.compute()];case 2:n=Math.ceil(r.size/rt),o=0,l.label=3;case 3:return o<n?(i=o*rt,a=o===n-1?r.size:i+rt,[4,this.readAsUint8Array(r.slice(i,a))]):[3,6];case 4:u=l.sent(),this.append(new Uint8Array(u)),l.label=5;case 5:return o++,[3,3];case 6:return[2,this.compute()]}})})},e.file=function(r){var t=new e;return t.file(r)},e}(),Wn=globalThis&&globalThis.__extends||function(){var e=function(r,t){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var i in o)o.hasOwnProperty(i)&&(n[i]=o[i])},e(r,t)};return function(r,t){e(r,t);function n(){this.constructor=r}r.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),Dn=globalThis&&globalThis.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(f){try{s(n.next(f))}catch(m){a(m)}}function l(f){try{s(n.throw(f))}catch(m){a(m)}}function s(f){f.done?i(f.value):o(f.value).then(u,l)}s((n=n.apply(e,r||[])).next())})},qn=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(f){return l([s,f])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(f){s=[6,f],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Ue=function(e){Wn(r,e);function r(){return e!==null&&e.apply(this,arguments)||this}return r.prototype.run=function(){return Dn(this,void 0,void 0,function(){var t,n,o,i,a=this;return qn(this,function(u){switch(u.label){case 0:return this.logger.info("start run Direct."),t=new FormData,t.append("file",this.file),t.append("token",this.token),this.key!=null&&t.append("key",this.key),t.append("fname",this.putExtra.fname),this.config.checkByServer?[4,Nn.file(this.file)]:[3,2];case 1:n=u.sent(),t.append("crc32",n.toString()),u.label=2;case 2:return this.putExtra.customVars&&(this.logger.info("init customVars."),o=this.putExtra.customVars,Object.keys(o).forEach(function(l){return t.append(l,o[l].toString())}),this.logger.info("customVars inited.")),this.logger.info("formData inited."),[4,Fn(this.uploadHost.getUrl(),t,{onProgress:function(l){a.updateDirectProgress(l.loaded,l.total)},onCreate:function(l){return a.addXhr(l)}})];case 3:return i=u.sent(),this.logger.info("Direct progress finish."),this.finishDirectProgress(),[2,i]}})})},r.prototype.updateDirectProgress=function(t,n){this.progress={total:this.getProgressInfoItem(t,n+1)},this.onData(this.progress)},r.prototype.finishDirectProgress=function(){if(!this.progress){this.logger.warn("progress is null."),this.progress={total:this.getProgressInfoItem(this.file.size,this.file.size)},this.onData(this.progress);return}var t=this.progress.total;this.progress={total:this.getProgressInfoItem(t.loaded+1,t.size)},this.onData(this.progress)},r}(Ye);function $e(e,r,t){t===void 0&&(t=3);var n=Ie();n.open("POST","https://uplog.qbox.me/log/3"),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("Authorization",Tt(e).Authorization),n.onreadystatechange=function(){n.readyState===4&&n.status!==200&&t>0&&$e(e,r,t-1)};var o=[r.code||"",r.reqId||"",r.host||"",r.remoteIp||"",r.port||"",r.duration||"",r.time||"",r.bytesSent||"",r.upType||"",r.size||""].join(",");n.send(o)}var Vn=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},qt=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Vn(arguments[r]));return e},Gn=function(){function e(r,t,n,o){t===void 0&&(t=!0),n===void 0&&(n="OFF"),o===void 0&&(o="UPLOAD"),this.token=r,this.disableReport=t,this.level=n,this.prefix=o,this.id=++e.id}return e.prototype.getPrintPrefix=function(r){return"Qiniu-JS-SDK ["+r+"]["+this.prefix+"#"+this.id+"]:"},e.prototype.report=function(r,t){if(!this.disableReport)try{$e(this.token,r,t)}catch(n){this.warn(n)}},e.prototype.info=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n=["INFO"];n.includes(this.level)&&console.log.apply(console,qt([this.getPrintPrefix("INFO")],r))},e.prototype.warn=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n=["INFO","WARN"];n.includes(this.level)&&console.warn.apply(console,qt([this.getPrintPrefix("WARN")],r))},e.prototype.error=function(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];var n=["INFO","WARN","ERROR"];n.includes(this.level)&&console.error.apply(console,qt([this.getPrintPrefix("ERROR")],r))},e.id=0,e}(),Be=globalThis&&globalThis.__awaiter||function(e,r,t,n){function o(i){return i instanceof t?i:new t(function(a){a(i)})}return new(t||(t=Promise))(function(i,a){function u(f){try{s(n.next(f))}catch(m){a(m)}}function l(f){try{s(n.throw(f))}catch(m){a(m)}}function s(f){f.done?i(f.value):o(f.value).then(u,l)}s((n=n.apply(e,r||[])).next())})},Xe=globalThis&&globalThis.__generator||function(e,r){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,o,i,a;return a={next:u(0),throw:u(1),return:u(2)},typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function u(s){return function(f){return l([s,f])}}function l(s){if(n)throw new TypeError("Generator is already executing.");for(;t;)try{if(n=1,o&&(i=s[0]&2?o.return:s[0]?o.throw||((i=o.return)&&i.call(o),0):o.next)&&!(i=i.call(o,s[1])).done)return i;switch(o=0,i&&(s=[s[0]&2,i.value]),s[0]){case 0:case 1:i=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,o=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!i||s[1]>i[0]&&s[1]<i[3])){t.label=s[1];break}if(s[0]===6&&t.label<i[1]){t.label=i[1],i=s;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(s);break}i[2]&&t.ops.pop(),t.trys.pop();continue}s=r.call(e,t)}catch(f){s=[6,f],o=0}finally{n=i=0}if(s[0]&5)throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}},Jn=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Zn=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(Jn(arguments[r]));return e},It=new Map,Kn=function(){function e(r,t){this.host=r,this.protocol=t}return e.prototype.isFrozen=function(){var r=new Date().getTime(),t=It.get(this.host);return t!=null&&t>=r},e.prototype.freeze=function(r){r===void 0&&(r=20);var t=new Date().getTime()+r*1e3;It.set(this.host,t)},e.prototype.unfreeze=function(){It.delete(this.host)},e.prototype.getUrl=function(){return this.protocol+"://"+this.host},e.prototype.getUnfreezeTime=function(){return It.get(this.host)},e}(),Qn=function(){function e(r){r===void 0&&(r=[]),this.initHosts=r,this.cachedHostsMap=new Map}return e.prototype.register=function(r,t,n,o){this.cachedHostsMap.set(r+"@"+t,n.map(function(i){return new Kn(i,o)}))},e.prototype.refresh=function(r,t,n){var o,i,a,u;return Be(this,void 0,void 0,function(){var l,s,f;return Xe(this,function(m){switch(m.label){case 0:return l=this.cachedHostsMap.get(r+"@"+t)||[],l.length>0?[2]:this.initHosts.length>0?(this.register(r,t,this.initHosts,n),[2]):[4,En(r,t,n)];case 1:return s=m.sent(),(s==null?void 0:s.data)!=null&&(f=Zn(((i=(o=s.data.up)===null||o===void 0?void 0:o.acc)===null||i===void 0?void 0:i.main)||[],((u=(a=s.data.up)===null||a===void 0?void 0:a.acc)===null||u===void 0?void 0:u.backup)||[]),this.register(r,t,f,n)),[2]}})})},e.prototype.getUp=function(r,t,n){return Be(this,void 0,void 0,function(){var o,i,a;return Xe(this,function(u){switch(u.label){case 0:return[4,this.refresh(r,t,n)];case 1:return u.sent(),o=this.cachedHostsMap.get(r+"@"+t)||[],o.length===0?[2,null]:(i=o.filter(function(l){return!l.isFrozen()}),i.length>0?[2,i[0]]:(a=o.slice().sort(function(l,s){return(l.getUnfreezeTime()||0)-(s.getUnfreezeTime()||0)}),[2,a[0]]))}})})},e}();function ti(e,r,t,n){return e.config&&e.config.forceDirect?(n.info("ues forceDirect mode."),new Ue(e,r,t,n)):e.file.size>4*rt?(n.info("file size over 4M, use Resume."),new jn(e,r,t,n)):(n.info("file size less or equal than 4M, use Direct."),new Ue(e,r,t,n))}function ei(e,r,t,n,o){var i=new Gn(t,o==null?void 0:o.disableStatisticsReport,o==null?void 0:o.debugLogLevel,e.name),a={file:e,key:r,token:t,putExtra:n,config:ii(o,i)},u=new Qn(a.config.uphost);return new on(function(l){var s=ti(a,{onData:function(f){return l.next(f)},onError:function(f){return l.error(f)},onComplete:function(f){return l.complete(f)}},u,i);return s.putFile(),s.stop.bind(s)})}var nt=globalThis&&globalThis.__assign||function(){return nt=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},nt.apply(this,arguments)},ri=globalThis&&globalThis.__rest||function(e,r){var t={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&r.indexOf(n)<0&&(t[n]=e[n]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,n=Object.getOwnPropertySymbols(e);o<n.length;o++)r.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(t[n[o]]=e[n[o]]);return t},ni=globalThis&&globalThis.__read||function(e,r){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var n=t.call(e),o,i=[],a;try{for(;(r===void 0||r-- >0)&&!(o=n.next()).done;)i.push(o.value)}catch(u){a={error:u}}finally{try{o&&!o.done&&(t=n.return)&&t.call(n)}finally{if(a)throw a.error}}return i},Vt=globalThis&&globalThis.__spread||function(){for(var e=[],r=0;r<arguments.length;r++)e=e.concat(ni(arguments[r]));return e};function ii(e,r){var t=nt({},e),n=t.upprotocol,o=t.uphost,i=ri(t,["upprotocol","uphost"]),a=nt({uphost:[],retryCount:3,checkByMD5:!1,forceDirect:!1,useCdnDomain:!0,checkByServer:!1,concurrentRequestLimit:3,chunkSize:zn,upprotocol:"https",debugLogLevel:"OFF",disableStatisticsReport:!1},i);n&&(a.upprotocol=n.replace(/:$/,""));var u=[];if(r&&(e==null?void 0:e.uphost)!=null&&(e==null?void 0:e.region)!=null&&r.warn("do not use both the uphost and region config."),o)Array.isArray(o)?u.push.apply(u,Vt(o)):u.push(o);else if(a==null?void 0:a.region){var l=On[a==null?void 0:a.region];a.useCdnDomain?u.push.apply(u,Vt(l.cdnUphost)):u.push.apply(u,Vt(l.srcUphost))}return nt(nt({},a),{uphost:u.filter(Boolean)})}var je=globalThis&&globalThis.__assign||function(){return je=Object.assign||function(e){for(var r,t=1,n=arguments.length;t<n;t++){r=arguments[t];for(var o in r)Object.prototype.hasOwnProperty.call(r,o)&&(e[o]=r[o])}return e},je.apply(this,arguments)};globalThis&&globalThis.__awaiter;globalThis&&globalThis.__generator;var Gt={PNG:"image/png",JPEG:"image/jpeg",WEBP:"image/webp",BMP:"image/bmp"};Object.keys(Gt).map(function(e){return Gt[e]});Gt.JPEG;function oi(){return lr.get("/public/qiniuToken/")}function Ne(){return{upload:(r,t)=>new Promise((n,o)=>{oi().then(i=>{let a=i.domain,u=i.token,l=r+"/"+t.name.substring(0,t.name.lastIndexOf("."))+"-"+new Date().getTime()+t.name.substring(t.name.lastIndexOf(".")),s={useCdnDomain:!0,region:Z.z1};ei(t,l,u,{fname:"",params:{},mimeType:null},s).subscribe({next:y=>{console.log(y)},error:y=>{console.log(y),o(y)},complete:y=>{let w=a+y.key;n(w)}})}).catch(i=>{console.log(i)})})}}const We=e=>(Lt("data-v-db09ec9a"),e=e(),Pt(),e),si=We(()=>E("p",null,"\u9009\u62E9\u56FE\u7247",-1)),ai={class:"cropper","element-loading-text":"\u56FE\u7247\u4E0A\u4F20\u4E2D..."},ui={class:"cropper-area"},hi=We(()=>E("label",{class:"pointer",for:"uploads"},"\u66F4\u6362\u56FE\u7247",-1)),ci=et("\u53D6 \u6D88"),li=et("\u786E \u5B9A"),fi={props:{width:{type:Number,required:!1,default:200},height:{type:Number,required:!1,default:200},dir:{type:String,required:!0,default:"upload"}},emits:["saveImg"],setup(e,{expose:r,emit:t}){const n=e;let{MyIcon:o}=Ce(),{timeFile:i}=ke(),{upload:a}=Ne();Zt(()=>(console.log(n.width),console.log(n.height),Object.is(n.width,NaN)&&Object.is(n.height,NaN)?n.width/n.height:1));const u=q(null),l=q(""),s=q(!1),f=c=>{let h;"raw"in c?(console.log("element\u5BF9\u8C61"),h=c.raw):(console.log("\u539F\u751F\u5BF9\u8C61"),h=c.target.files[0]);const p=new FileReader;p.onload=d=>{l.value=d.target.result},p.readAsDataURL(h),s.value=!0},m=Yt({}),y=c=>{Object.assign(m,c)},w=c=>{c=c||1,u.value.changeScale(c)},x=c=>{c===1?u.value.rotateLeft():u.value.rotateRight()},_=()=>{u.value.refresh()},b=q(!1),v=()=>{u.value.getCropBlob(c=>{console.log(c),b.value=!0;const h=new File([c],i(Date.now())+".jpg",{type:c.type});console.log(h),a(n.dir,h).then(p=>{console.log(p),at({message:"\u56FE\u7247\u4E0A\u4F20\u6210\u529F\uFF01",type:"success"}),t("saveImg",p),s.value=!1,b.value=!1}).catch(p=>{console.log(p),at.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF01"),b.value=!1})})};return r({test:()=>{console.log("\u8FD9\u662F\u56FE\u7247\u4E0A\u4F20\u7EC4\u4EF6\u7684\u65B9\u6CD5")},uploadChange:f}),(c,h)=>{const p=Rt,d=Kt,H=Qt,R=te,$=ee;return N(),D("div",null,[C(d,{accept:".jpg,.jpeg,.png",action:"./","auto-upload":!1,"on-change":f,"show-file-list":!1},{default:A(()=>[C(p,{class:"upload-btn"},{default:A(()=>[C(P(o),{class:"upload-icon",type:"icon-upload-img"}),si]),_:1})]),_:1}),C(R,{title:"\u56FE\u7247\u88C1\u526A",modelValue:s.value,"onUpdate:modelValue":h[7]||(h[7]=L=>s.value=L),"append-to-body":"",center:""},{footer:A(()=>[C(p,{size:"medium",type:"success"},{default:A(()=>[hi]),_:1}),E("input",{type:"file",id:"uploads",style:{position:"absolute",clip:"rect(0 0 0 0)"},accept:"image/png, image/jpeg, image/jpg",onChange:h[0]||(h[0]=L=>f(L))},null,32),C(H,{class:"cropper-btn-group"},{default:A(()=>[C(p,{size:"medium",type:"primary",plain:"",onClick:h[1]||(h[1]=L=>w(1))},{default:A(()=>[C(P(o),{type:"icon-amplification"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[2]||(h[2]=L=>w(-1))},{default:A(()=>[C(P(o),{type:"icon-narrow"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[3]||(h[3]=L=>_())},{default:A(()=>[C(P(o),{type:"icon-reset"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[4]||(h[4]=L=>x(1))},{default:A(()=>[C(P(o),{type:"icon-clockwise-sense"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[5]||(h[5]=L=>x(-1))},{default:A(()=>[C(P(o),{type:"icon-clockwise-dirction"})]),_:1})]),_:1}),C(p,{size:"medium",onClick:h[6]||(h[6]=L=>s.value=!1)},{default:A(()=>[ci]),_:1}),C(p,{type:"primary",onClick:v,size:"medium"},{default:A(()=>[li]),_:1})]),default:A(()=>[tt(E("div",ai,[E("span",ui,[C(P(ht),{ref:(L,it)=>{it.cropper=L,u.value=L},img:l.value,autoCrop:!0,autoCropWidth:n.width,autoCropHeight:n.height,fixedNumber:[n.width/n.height,1],fixed:!0,onRealTime:y},null,8,["img","autoCropWidth","autoCropHeight","fixedNumber"])])],512),[[$,b.value]])]),_:1},8,["modelValue"])])}}};var pi=zt(fi,[["__scopeId","data-v-db09ec9a"]]);const De=e=>(Lt("data-v-7ccd3e7e"),e=e(),Pt(),e),di=De(()=>E("p",null,"\u9009\u62E9\u56FE\u7247",-1)),gi={class:"cropper","element-loading-text":"\u56FE\u7247\u4E0A\u4F20\u4E2D..."},vi={class:"cropper-area"},mi=De(()=>E("label",{class:"pointer",for:"uploads"},"\u66F4\u6362\u56FE\u7247",-1)),yi=et("\u53D6 \u6D88"),bi=et("\u786E \u5B9A"),wi={props:{width:{type:Number,required:!1,default:200},height:{type:Number,required:!1,default:200},dir:{type:String,required:!0,default:"upload"}},emits:["saveImg"],setup(e,{expose:r,emit:t}){const n=e;let{MyIcon:o}=Ce(),{timeFile:i}=ke(),{upload:a}=Ne();Zt(()=>(console.log(n.width),console.log(n.height),Object.is(n.width,NaN)&&Object.is(n.height,NaN)?n.width/n.height:1));const u=q(null),l=q(""),s=q(!1),f=c=>{let h;"raw"in c?(console.log("element\u5BF9\u8C61"),h=c.raw):(console.log("\u539F\u751F\u5BF9\u8C61"),h=c.target.files[0]);const p=new FileReader;p.onload=d=>{l.value=d.target.result},p.readAsDataURL(h),s.value=!0},m=Yt({}),y=c=>{Object.assign(m,c)},w=c=>{c=c||1,u.value.changeScale(c)},x=c=>{c===1?u.value.rotateLeft():u.value.rotateRight()},_=()=>{u.value.refresh()},b=q(!1),v=()=>{u.value.getCropBlob(c=>{console.log(c),b.value=!0;const h=new File([c],i(Date.now())+".jpg",{type:c.type});console.log(h),a(n.dir,h).then(p=>{console.log(p),at({message:"\u56FE\u7247\u4E0A\u4F20\u6210\u529F\uFF01",type:"success"}),t("saveImg",p),s.value=!1,b.value=!1}).catch(p=>{console.log(p),at.error("\u56FE\u7247\u4E0A\u4F20\u5931\u8D25\uFF01"),b.value=!1})})};return r({test:()=>{console.log("\u8FD9\u662F\u56FE\u7247\u4E0A\u4F20\u7EC4\u4EF6\u7684\u65B9\u6CD5")},uploadChange:f}),(c,h)=>{const p=Rt,d=Kt,H=Qt,R=te,$=ee;return N(),D("div",null,[C(d,{accept:".jpg,.jpeg,.png",action:"./","auto-upload":!1,"on-change":f,"show-file-list":!1},{default:A(()=>[C(p,{class:"upload-btn"},{default:A(()=>[C(P(o),{class:"upload-icon",type:"icon-upload-img"}),di]),_:1})]),_:1}),C(R,{title:"\u56FE\u7247\u88C1\u526A",modelValue:s.value,"onUpdate:modelValue":h[7]||(h[7]=L=>s.value=L),"append-to-body":"",center:""},{footer:A(()=>[C(p,{size:"medium",type:"success"},{default:A(()=>[mi]),_:1}),E("input",{type:"file",id:"uploads",style:{position:"absolute",clip:"rect(0 0 0 0)"},accept:"image/png, image/jpeg, image/jpg",onChange:h[0]||(h[0]=L=>f(L))},null,32),C(H,{class:"cropper-btn-group"},{default:A(()=>[C(p,{size:"medium",type:"primary",plain:"",onClick:h[1]||(h[1]=L=>w(1))},{default:A(()=>[C(P(o),{type:"icon-amplification"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[2]||(h[2]=L=>w(-1))},{default:A(()=>[C(P(o),{type:"icon-narrow"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[3]||(h[3]=L=>_())},{default:A(()=>[C(P(o),{type:"icon-reset"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[4]||(h[4]=L=>x(1))},{default:A(()=>[C(P(o),{type:"icon-clockwise-sense"})]),_:1}),C(p,{size:"medium",type:"primary",plain:"",onClick:h[5]||(h[5]=L=>x(-1))},{default:A(()=>[C(P(o),{type:"icon-clockwise-dirction"})]),_:1})]),_:1}),C(p,{size:"medium",onClick:h[6]||(h[6]=L=>s.value=!1)},{default:A(()=>[yi]),_:1}),C(p,{type:"primary",onClick:v,size:"medium"},{default:A(()=>[bi]),_:1})]),default:A(()=>[tt(E("div",gi,[E("span",vi,[C(P(ht),{ref:(L,it)=>{it.cropper=L,u.value=L},img:l.value,autoCrop:!0,onRealTime:y},null,8,["img"])])],512),[[$,b.value]])]),_:1},8,["modelValue"])])}}};var xi=zt(wi,[["__scopeId","data-v-7ccd3e7e"]]);const _i={class:"main"},Ci=et("\u590D\u5236\u56FE\u7247\u5730\u5740"),Si=et("\u53D6\u6D88"),ki={setup(e){const{toClipboard:r}=dr(),t=Yt({value:"",directory:"",url:"",width:100,height:100}),n=[{value:0,directory:"articleCover",label:"\u6587\u7AE0\u5C01\u9762",width:540,height:360},{value:1,directory:"noteCover",label:"\u7B14\u8BB0\u5C01\u9762",width:425,height:225},{value:2,directory:"carousel",label:"\u8F6E\u64AD\u56FE",width:900,height:500},{value:3,directory:"markdown",label:"\u5BCC\u6587\u672C\u56FE\u7247",width:NaN,height:NaN},{value:4,directory:"link",label:"\u53CB\u60C5\u94FE\u63A5",width:50,height:50},{value:5,directory:"photo",label:"\u7528\u6237\u5934\u50CF",width:50,height:50},{value:6,directory:"image",label:"\u5176\u4ED6\u56FE\u7247",width:NaN,height:NaN}],o=l=>{console.log(l),t.directory=n[l].directory,t.width=n[l].width,t.height=n[l].height},i=l=>{console.log(l),t.url=l},a=()=>{console.log("\u590D\u5236\u4E86\u554A");try{r(t.url),console.log(t.url),at({message:"\u56FE\u7247\u94FE\u63A5\u6210\u529F\u590D\u5236\u5230\u526A\u5207\u677F\uFF01",type:"success"})}catch(l){console.error(l)}},u=()=>{t.url="",t.directory=""};return(l,s)=>{const f=nr,m=ir,y=or,w=sr,x=Rt,_=ar,b=ur;return N(),D("div",_i,[C(b,{shadow:"hover"},{default:A(()=>[C(_,{model:P(t),"label-width":"120px"},{default:A(()=>[C(y,{label:"\u56FE\u7247\u7C7B\u578B\uFF1A"},{default:A(()=>[C(m,{modelValue:P(t).value,"onUpdate:modelValue":s[0]||(s[0]=v=>P(t).value=v),onChange:o,placeholder:"\u8BF7\u9009\u62E9\u4E0A\u4F20\u56FE\u7247\u7C7B\u578B",size:"large"},{default:A(()=>[(N(),D(hr,null,cr(n,v=>C(f,{key:v.value,label:v.label,value:v.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),tt(E("span",null,[E("p",null,"\u56FE\u7247\u4E0A\u4F20\u76EE\u5F55\uFF1A"+st(P(t).directory),1),E("p",null,"\u56FE\u7247\u4E0A\u4F20\u5C3A\u5BF8\uFF1A"+st(P(t).width)+" X "+st(P(t).height),1)],512),[[mt,P(t).directory]])]),_:1}),P(t).width?(N(),re(y,{key:0,label:"\u56FE\u7247\u4E0A\u4F20\uFF1A"},{default:A(()=>[C(pi,{width:P(t).width,height:P(t).height,dir:P(t).directory,onSaveImg:i},null,8,["width","height","dir"])]),_:1})):(N(),re(y,{key:1,label:"\u56FE\u7247\u4E0A\u4F20\uFF1A"},{default:A(()=>[C(xi,{dir:P(t).directory,onSaveImg:i},null,8,["dir"])]),_:1})),tt(C(y,{label:"\u56FE\u7247\u9884\u89C8\uFF1A"},{default:A(()=>[C(w,{src:P(t).url,fit:"contain"},null,8,["src"])]),_:1},512),[[mt,P(t).url]]),C(y,null,{default:A(()=>[C(x,{type:"primary",onClick:a},{default:A(()=>[Ci]),_:1}),C(x,{onClick:u},{default:A(()=>[Si]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})])}}};var Ei=zt(ki,[["__scopeId","data-v-06fb402c"]]);export{Ei as default};
